{"posts":[{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"history file","salience":0.18515820801258087},{"name":"bits","salience":0.1829848438501358},{"name":"line","salience":0.1452627032995224},{"name":"line","salience":0.1435418277978897},{"name":"parts","salience":0.12655968964099884},{"name":"string","salience":0.05980797857046127},{"name":"buffer length","salience":0.04895417392253876},{"name":"char","salience":0.03436293452978134},{"name":"scanf","salience":0.03020668402314186},{"name":"buffer char","salience":0.02158047817647457},{"name":"length","salience":0.02158047817647457}],"question":" When I try to fscanf in from the history file, I have bits of the previously scanned line or am missing parts of the new line. How do I avoid this? I am currently placing the scanned string into a buffer char[] of length 100 (a chosen buffer length) and reusing that char for each scanf. ","answers":[" Don't use fscanf() . Use fgets() to read each line into a buffer and then use sscanf() to parse the text in the buffer. ",[" Thank you! "]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"memory leak","salience":0.5631477236747742},{"name":"code","salience":0.13594399392604828},{"name":"line","salience":0.10044728964567184},{"name":"mymysh.c","salience":0.07770642638206482},{"name":"args","salience":0.06928353011608124},{"name":"code","salience":0.05347103625535965}],"question":" What is this memory leak? On line 299 the code I have on mymysh.c is : if (strcmp(args[i], \"&lt;\") == EQUAL) { (my code doesn't even go to 299 on history.c) ","answers":[" at the moment all I can tell is that you are calling strdup in findExecutable() and never freeing the result. "," its line 299 in the malloc.c file. You don't appear to be compiling with the -g flag so it's not giving very good info. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"parent program","salience":0.5444306135177612},{"name":"memory leaks","salience":0.16545771062374115},{"name":"child processes","salience":0.14337100088596344},{"name":"none","salience":0.02851214073598385},{"name":"parent","salience":0.024941185489296913},{"name":"child","salience":0.02195802330970764},{"name":"memory leaks","salience":0.020408691838383675},{"name":"error","salience":0.019545389339327812},{"name":"w/e","salience":0.01794431358575821},{"name":"bug","salience":0.013430924154818058}],"question":" Is it ok if our child processes have memory leaks when exiting? My parent program has none but I find if I exit out of my child one when it's not 'ready' eg because it has an error or w/e, it has memory leaks. But when it exits into the parent one, the parent one doesn't have any. I've been trying to fix this 'bug' for hours and I'm not sure if I could ","answers":[]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"showcommandhistory","salience":0.6148484349250793},{"name":"file input","salience":0.09291959553956985},{"name":"someone","salience":0.07076700776815414},{"name":"history","salience":0.05050190910696983},{"name":"history scaffold","salience":0.03207556903362274},{"name":"parameter","salience":0.020717142149806023},{"name":"history","salience":0.01630537025630474},{"name":"names","salience":0.015559321269392967},{"name":"option","salience":0.01198357529938221},{"name":"output","salience":0.010657832026481628},{"name":"histfile","salience":0.01041419617831707},{"name":"example program","salience":0.009783436544239521},{"name":"command history","salience":0.008597353473305702},{"name":"struct","salience":0.007345686201006174},{"name":"parameter","salience":0.007016109302639961},{"name":"something","salience":0.00583733431994915},{"name":"history","salience":0.005395905580371618},{"name":"commandhistory","salience":0.0049492535181343555},{"name":"history file","salience":0.00432497076690197}],"question":" I was hoping someone could explain why 'showCommandHistory' is supposed to take a file input in the history scaffold. The parameter has two different names: In history.h: void showCommandHistory(FILE *histFile); In history.c: void showCommandHistory(FILE *outf) {} I thought it might be to redirect output, but displaying history shouldn't ever redirect (going by the example program). The other option would be to read in the history from the history file, but the history is already loaded into the 'CommandHistory' struct, and that is all I use to display the command history. Am I missing something obvious or is this parameter useless? ","answers":[" The parameter makes the SaveCommandHistory function easier to write ",[" Ahh ok thank you! "]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"cd","salience":0.417776495218277},{"name":"cd","salience":0.16859197616577148},{"name":"permission issue","salience":0.12096788734197617},{"name":"folder","salience":0.10533764213323593},{"name":"cd","salience":0.0567379966378212},{"name":"folder","salience":0.04757705330848694},{"name":"issue","salience":0.02508736029267311},{"name":"code","salience":0.02204868756234646},{"name":"anyone","salience":0.021971112117171288},{"name":"home directory","salience":0.013903779909014702}],"question":" \"cd\" is not working when I input \"cd\" by itself, and then cd'ing into another folder I know I have. cd works when I am in ~cs1521 folder, but not when I'm in my home directory. I am wondering if it is a permission issue, or my code's issue. Anyone else? ","answers":[" Does cd ~/KnownFolder work? When you use cd by itself, what do you see if the next command is pwd or ls ? ",[" All 3 of your suggestions work - it is only when I try to cd \"file\" when it does not work. The error is triggered by chdir() returning -1. ",[" You can't cd to a file, if that's what your comment meant. And if you're putting quotes around the directory name that you want to cd to, that won't work either. Have a read of man 2 chdir ... do any of the errors mentioned there apply in your case? ",[" Sorry I phrased that very carelessly, I meant directory and the quotations weren't part of input. I've looked up chdir, but am unsure how to check the error output except for the fact chdir() returns -1 if it fails (which I've used to print \"no such file or directory\". How do I print errno to output so I can find out which error I am facing? Thanks Edit: worked it out by passing absolute path to chdir, instead of just relative path before. ",[" perror() will tell you which error "]]]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"tokens","salience":0.2598758637905121},{"name":"element","salience":0.2598758637905121},{"name":"array","salience":0.10252115875482559},{"name":"glob","salience":0.09032966941595078},{"name":"wildcard","salience":0.0471583716571331},{"name":"elements","salience":0.03374429792165756},{"name":"strdup","salience":0.03225618228316307},{"name":"one","salience":0.030031464993953705},{"name":"following","salience":0.027431892231106758},{"name":"things","salience":0.02457164227962494},{"name":"array pointer","salience":0.02283148095011711},{"name":"memory","salience":0.014454683288931847},{"name":"thanks","salience":0.014415155164897442},{"name":"help","salience":0.014415155164897442},{"name":"tokens","salience":0.010354321449995041},{"name":"strdup","salience":0.010354321449995041},{"name":"i++","salience":0.005378490313887596}],"question":" Hi, I'm currently trying to add an extra element onto my tokens[] array to implement glob() properly. Assuming that it was tokenised to have 2 elements: - ls - *.c How would I create a new one so that I can include the wildcard returns from *.c? I've tried things such as the following: i = 3; tokens[i++] = strdup(gl_pathc[i]); But I receive an illegal array pointer. I thought that strdup would allocate the memory for me. Thanks for any help. ","answers":[" First off, gl_pathc is an int. gl_pathv is the array you want. Secondly, you will need to realloc the tokens array to its current size plus gl_argc-1. If you take this approach. Both of there problems will cause an illegal array error. To fix this you could realloc like I mentioned above or you could use GLOB_NOCHECK as a flag to glob and call glob on all elements of the tokens array in order. This will give you back a gl_pathv array that you can use as your new tokens array, without needing to strdup every element. ",[" Ahhh. Finally got it! Thank you Dylan. The only thing is, I'm not sure whether I should tokenise this gl_pathv array or not. I'm currently returning gl_pathv but it sometimes works and then sometimes SegFaults. I assume this has to do with running out of memory (maybe?) I can return gl_pathv but then I'm not able to free it at the end of my program because it's not recognised as a glob_t anymore. Alternatively, I could tokenise it and send this back but I'm not sure what I would pass as the second argument of tokenise. There is no string that separates each token. Have I missed something? EDIT: I should also mention that I'm using the GLOB_APPEND flag. ",[" gl_pathv is a tokenised array. You can free it with freeTokens. ",[" OK thank you for that. Do you know why I would be getting this error message then when I input: ls ~ It seems to be intermittent and I can't figure out why. It goes away when I create a debug loop printing out all the gl_pathv strings and then comes back when I delete this loop. I can't figure out why this would be happening. mymysh.c:234 runtime error - illegal array, pointer or other operation Execution stopped here in fileNameExpand(tokens=0x60300000c850) in mymysh.c at line 234: int i; for(i=0; tokens[i] !=NULL; i++){ --&gt; glob(tokens[i], GLOB_TILDE|GLOB_NOCHECK|GLOB_APPEND, 0, &amp;result); } Values when execution stopped: i = 0 tokens[i] = \"ls\" Let me know if it's easier if I email my code. ",[" The first call to glob shouldn't have GLOB_APPEND only on subsequent calls. Also the second last argument should be NULL not 0. ",[" Thank you so much Dylan! "]]]]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"code","salience":0.23016801476478577},{"name":"ls","salience":0.11620926111936569},{"name":"input","salience":0.09384451806545258},{"name":"ref imp","salience":0.09384451806545258},{"name":"ls","salience":0.0803750604391098},{"name":"ls","salience":0.07941878587007523},{"name":"snail pace","salience":0.07568322122097015},{"name":"implementation","salience":0.06474148482084274},{"name":"argument list","salience":0.054028578102588654},{"name":"cse","salience":0.04505935683846474},{"name":"mymysh","salience":0.03167631849646568},{"name":"bash","salience":0.019677186384797096},{"name":"thanks","salience":0.015273690223693848}],"question":" Hello, I am confused as to how far back our code should go with this input 'ls /*' - my ref imp is functioning for \"ls /*/*\" but breaking on \"ls /*/*/*\" - my implementation works up to /*/*/* but is snail pace on /*/*/*/* - also the actual bash on cse says argument list is too long if you try to do this outside the mymysh How far back do we have to do? Thanks ","answers":[" As far as the example goes. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"file/ directory error","salience":0.2523547112941742},{"name":"xyx.txt","salience":0.1626618504524231},{"name":"cat &lt","salience":0.10241978615522385},{"name":"error","salience":0.10123901814222336},{"name":"contents","salience":0.08775616437196732},{"name":"file","salience":0.06392519921064377},{"name":"command","salience":0.05562726780772209},{"name":"terminal","salience":0.05173998326063156},{"name":"ideas","salience":0.03347451984882355},{"name":"any","salience":0.027465619146823883},{"name":"perror","salience":0.01914677582681179},{"name":"ones","salience":0.018914010375738144},{"name":"error","salience":0.01247529685497284},{"name":"i'v","salience":0.010799810290336609}],"question":" No such File/ directory error: I keep getting this error when I do \"cat &lt; xyx.txt\" even though it does execute the command and print the contents of the file to the terminal. I cant seem to figure out where I'm going wrong, because the error isn't any of the ones I'v set up using perror. Any ideas where I should be checking? ","answers":[" you're passing &lt; as an argument to cat , you need to remove &lt; and the file name after you do the redirection and before you execve . ",[" Fixed! Thank you so much! "]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"execve","salience":0.5108150839805603},{"name":"child process","salience":0.19411593675613403},{"name":"child process","salience":0.09441594034433365},{"name":"execution","salience":0.09441594034433365},{"name":"issue","salience":0.05511630326509476},{"name":"child process","salience":0.02198225073516369},{"name":"times","salience":0.012295261956751347},{"name":"nonexec execve","salience":0.009106560610234737},{"name":"command","salience":0.007736746687442064}],"question":" I understand when you call execve and it succeeds, it throws away the child process after the execution. However, if it fails, the child process is still running. How do I close the child process? My issue is, when I type the command ./nonexec execve fails but it doesn't close the forked shelled. Therefore, I have to type exit 2 times instead of 1 ","answers":[" Put a call to the exit() function after you print the error message for execve() failing ",[" Thank you. I was trying kill ( 0 , SIGTERM ); and kill ( 0 , SIGKILL ); and it wasn't giving the same output, but exit(1) did it. Thanks. "]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"cat","salience":0.324790358543396},{"name":"command","salience":0.2797432243824005},{"name":"input","salience":0.2323068082332611},{"name":"error message","salience":0.16315962374210358}],"question":" If we were to run an invalid command such as \"cat &lt;\" , is it necessary to print an error message and then proceed to ask for input (prompt) ? ","answers":[" Go by what the example does. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"guarantees","salience":0.3228870928287506},{"name":"size","salience":0.2278582751750946},{"name":"form","salience":0.2127278596162796},{"name":"home","salience":0.1629759818315506},{"name":"string","salience":0.07355080544948578}],"question":" Do we have any guarantees on the maximum size of the expanded form of the string \"$HOME/.mymysh_history\"? ","answers":[" $HOME wont be longer than MAX_PATH The whole thing shouldn't be longer than MAX_PATH but that's not entirely guaranteed. ",[" Where's MAX_PATH defined? ",[" #include &lt;linux/limits.h&gt; Although it is probably better to just use strlen() on the return of getenv(\"HOME\") "]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"error message","salience":0.4928347170352936},{"name":"suggestions","salience":0.28302764892578125},{"name":"testing","salience":0.11755367368459702},{"name":"nonexec","salience":0.03535233065485954},{"name":"program","salience":0.03224722668528557},{"name":"type","salience":0.019492201507091522},{"name":"executable","salience":0.019492201507091522}],"question":" Hi, In the suggestions for testing, how is this particular error message generated? I'm asking because the error message that my program produces is different. I don't get \"./nonexec: unknown type of executable\" ","answers":[" What error message do you get? This issue was discussed in another Comments thread . ",[" The error message that I get is \"./nonexec: Exec format error\". I used perror and exit(255) but the message is different. The thread that you linked said that the error was manually printed, does that refer to the \"unknown type of executable part\"? ",[" Clearly mymysh doesn't use perror() ... just copy what mymysh does. ",[" Yes, thank you :) "]]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"problem","salience":0.6114831566810608},{"name":"function","salience":0.12282884120941162},{"name":"way","salience":0.11453564465045929},{"name":"isexecutable","salience":0.10836505889892578},{"name":"error message","salience":0.042787306010723114}],"question":" I have a problem with isExecutable() function even though it wasn't modified in any way. I haven't had this error message until today. ","answers":[" nvm i forgot a curly brace somewhere lmao "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"output stream","salience":0.11542864143848419},{"name":"error message","salience":0.11510809510946274},{"name":"printing errors","salience":0.11469461023807526},{"name":"answers","salience":0.10192759335041046},{"name":"number","salience":0.10192759335041046},{"name":"errors","salience":0.09114677459001541},{"name":"error","salience":0.054842233657836914},{"name":"choice","salience":0.03948979452252388},{"name":"functionality","salience":0.03229282796382904},{"name":"file","salience":0.023294925689697266},{"name":"reference program","salience":0.021705765277147293},{"name":"nonexec","salience":0.020634666085243225},{"name":"difference","salience":0.019082000479102135},{"name":"nonexec","salience":0.0161999873816967},{"name":"reference","salience":0.014134936034679413},{"name":"programs","salience":0.01348281279206276},{"name":"executable","salience":0.012991146184504032},{"name":"type","salience":0.012991146184504032},{"name":"tests","salience":0.012832893058657646},{"name":"error messages","salience":0.011121834628283978},{"name":"``./nonexec","salience":0.009477096609771252},{"name":"commands","salience":0.008915355429053307},{"name":"list","salience":0.00878993235528469},{"name":"``./nonexec &gt","salience":0.0076626986265182495},{"name":"output stream","salience":0.007093785330653191},{"name":"file","salience":0.004895259626209736},{"name":"terminal","salience":0.003922193311154842},{"name":"autotests","salience":0.003913408145308495}],"question":" Regarding printing errors to stderr or the current output stream, a number of answers already have indicated that when printing our own errors, our choice doesn't matter. However, this creates a functional difference with the reference program. In the tests released today, trying to run the non-executable file nonexec with \"./nonexec\" printed an error message \"./nonexec: unknown type of executable\". If we run with \"./nonexec &gt; ne.out\", the error message gets printed to the ne.out file instead. However, printing the error to stderr in our own programs causes it to be printed to the terminal, rather than the file. Can we assume that the autotests used for marking won't be redirecting commands with error messages? If we can't, can we have a list of when the reference uses stderr and when it uses the current output stream to ensure that our functionality is the same? ","answers":[" We will try to fiddle the output to ensure consistent output whether to stderr/stdout. I'm sure we'll be able to filter the output from your program to knock it into canonical form. If we can't work out how to do it, then we won't use that test, and we can manually check whether you've handled non-executable objects appropriately. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"question","salience":0.35040250420570374},{"name":"bin","salience":0.14448492228984833},{"name":"command","salience":0.12706723809242249},{"name":"history","salience":0.09920576959848404},{"name":"response","salience":0.09238822013139725},{"name":"code","salience":0.09238822013139725},{"name":"sample solution","salience":0.07020754367113113},{"name":"thanks","salience":0.023855583742260933}],"question":" Hi, Quick question about the ~cs1521/bin/mymysh : Given a clean history, if 'h' is the first command typed the response is: My current code does this instead: Is the sample solution bugged? Or should we try to follow that? Thanks! ","answers":[" This isn't what I see. When you say \"clean history\", what precisely does that mean? Remove the history file? Make it zero length? Edit it and have a single newline? ",[" Ah I think it was the edit with single new line causing this. Thanks! One more quick question, should sequence numbers begin at 0 or 1? ",[" They begin at 1. "]]," Mine shows nothing with clean history. Hope this may helps :) "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"home","salience":0.23483295738697052},{"name":"path","salience":0.22789138555526733},{"name":"string","salience":0.20318277180194855},{"name":"directory","salience":0.056377530097961426},{"name":"assignment","salience":0.056377530097961426},{"name":"/.mymysh_history","salience":0.04958018660545349},{"name":"printf","salience":0.030828222632408142},{"name":"``%s\\n","salience":0.02901563048362732},{"name":"code","salience":0.02779543586075306},{"name":"``%s\\n","salience":0.021941736340522766},{"name":"path","salience":0.021941736340522766},{"name":"output","salience":0.017081616446375847},{"name":"thanks","salience":0.013476226478815079},{"name":"printf","salience":0.009677044115960598}],"question":" Hi, When creating the string \"path\" for opening ~/.mymysh_history, HOME is being changed to the assignment 2 directory. After this code, printf(\"%s\\n\", getenv(\"HOME\"); and printf(\"%s\\n\", path); are the same output. Thanks. ","answers":[" Your declaration of path doesn't allocate any memory. The getenv() function returns a pointer to the string in the environment array. The strcat() function will then try to append the name of the history file to this element in the environment array. The elements in the env array are fixed size; it doesn't make sense to concatenate something onto the end of a full fixed-size array. Define path[] as a large array. Copy the environment string into that array. The append HISTFILE. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"success","salience":0.4310654401779175},{"name":"fopen error","salience":0.1373985856771469},{"name":"function","salience":0.0969940796494484},{"name":"history","salience":0.0969940796494484},{"name":"output","salience":0.046210505068302155},{"name":"stdout","salience":0.038127634674310684},{"name":"file redirection","salience":0.033399470150470734},{"name":"ls *.txt &gt","salience":0.0286386851221323},{"name":"execve","salience":0.026228876784443855},{"name":"file anything","salience":0.025913098827004433},{"name":"failure","salience":0.008787339553236961},{"name":"address","salience":0.008787339553236961},{"name":"error","salience":0.007008272223174572},{"name":"ls","salience":0.005381938070058823},{"name":"bad","salience":0.005202725995332003},{"name":"running /bin","salience":0.0038619330152869225}],"question":" Should I add the function to the history if there is an fopen error when I try and redirect stdout (say I do \"ls *.txt &gt;\"), so normally it wouldn't output to a file anything since there is invalid file redirection, but running execve would still return 0 so it is technically a success? My current output is mymysh$ ls *.txt&gt; ls.out Running /bin/ls ... -------------------- fopen failure: Bad address -------------------- Returns 0 Is this acceptable or should I just make it terminate upon an error? ","answers":[" This should result in no execve happening and the command shouldn't be added to the history. The running... should only be printed if you are going to execve and all checks for a valid command should happen first. But the line given should work. ",[" Ok thanks something must be wrong, I'll give it a go "]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"something","salience":0.4125719368457794},{"name":"cat","salience":0.14078304171562195},{"name":"content","salience":0.11685759574174881},{"name":"result","salience":0.11549760401248932},{"name":"text.txt","salience":0.11090969294309616},{"name":"text.txt","salience":0.05496777594089508},{"name":"parts","salience":0.04841233789920807}],"question":" Hello, When I do something like cat file.txt &gt; test.txt The result in my text.txt is: https://pastebin.com/eK0sJ4nM The content of file.txt is: https://pastebin.com/BvRik5RQ I am unsure of how I am suppose to get rid of the unwanted parts in text.txt ","answers":[" Don't use pastebin. All of those crap ads it spews at you obscure the text. You can paste images into your post using the little mountain icon on the command line just above. ",[" test.txt after running the cat command: file.txt So there s a bunch of unwanted text in test.txt. It should just say: This is the contents of file.txt ",[" looks like your dup2()ing too early in the program. The dup2()s should be inside the child part of the fork. ",[" I think you were right. I added my redirection code in my child process if statement if (pid == 0) , which got rid of the ending divider and return value. However, it is still putting in the top part of the content in my test.txt file. ",[" It still looks like you're dup2 is too early, or at least the Running... is to late. The Running... should be right before the fork. ",[" Hmm... what I am doing is 1. Forking 2. If statement to check if I am in the child. 3. In that if statement in the child, I print \"running\" 4. Execute 5. In parent I print the ending divider ",[" move 3 to before the fork. ",[" Thank you! I fixed it. I just forgot to move the dup2 part again! "],[" 1. Print out \"running\" 2. Forking 3. If statement to check I am in the child 4. In child I execute 5. Print out divider outside the if statement Output of text.txt "]]]]]]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"error","salience":0.4315335750579834},{"name":"file card expansion","salience":0.1715785712003708},{"name":"line","salience":0.143558531999588},{"name":"glob","salience":0.06528152525424957},{"name":"size","salience":0.056668899953365326},{"name":"glob_nocheck","salience":0.03875336796045303},{"name":"glob_tilde","salience":0.03861725702881813},{"name":"time","salience":0.02746131829917431},{"name":"p.s.","salience":0.016286112368106842}],"question":" Hi, I'm getting this error everytime i use my file card expansion twice. \"free(): invalid next size (normal) Aborted\". This occurs on the line that I call \"glob(wildcard_s,GLOB_NOCHECK|GLOB_TILDE, 0, &amp;glob_struct);\". what does this mean and how would i fix it? (p.s. it works perfectly fine the first time) ","answers":[" sorry, didn't see the rest. Its because you don't have the GLOB_APPEND flag on your glob call. ",[" I added GLOB_APPEND but that didn't solve anything. I noticed something else though: In this loop args[0] (originally \"ls\") changes midway through the loop. Is there something wrong with the way I'm mallocing? while(j &lt; glob_struct.gl_pathc){ printf(\"args[0] = %s\\n\",args[0]); if(args[i] == NULL){ printf(\"i = %d\\n\",i); args[i] = malloc(sizeof(char)*MAXLINE); } strcpy(args[i],glob_struct.gl_pathv[j]); printf(\"%s\\n\",args[i]); i++; j++; args[i] = NULL; } ",[" Is the args array malloced large enough? The last line sets args[i] to null. If i is 0 this will be bad. "]]," your freeing something that isn't malloced. Run with valgrind or gdb to find out where. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"assumption","salience":0.39099398255348206},{"name":"usage","salience":0.2419818788766861},{"name":"letter","salience":0.1384914219379425},{"name":"command","salience":0.1384914219379425},{"name":"ls root","salience":0.03316327929496765},{"name":"examples","salience":0.03316327929496765},{"name":"ls","salience":0.023714737966656685}],"question":" Hello can we make the assumption, that the correct usage of '~', will always be as the first letter in a command? What I mean: valid: cd ~/me.txt cd ~cs1521 ls ~ Invalid (I can't think of any examples): ls root/~ ","answers":[" Follow what the example does. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"home","salience":0.2410227656364441},{"name":"assignments","salience":0.1901235431432724},{"name":"web","salience":0.16606996953487396},{"name":"cs1521","salience":0.16606996953487396},{"name":"zip","salience":0.13911846280097961},{"name":"something","salience":0.05742703378200531},{"name":"thanks","salience":0.04016827791929245}],"question":" Hi, I'm unable to unzip /home/cs1521/web/18s2/assignments/assign2/files.zip, I'm not sure why. Am I doing something wrong? Thanks. ","answers":[" Now fixed. Try again. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"asdf","salience":0.46965792775154114},{"name":"i/o redirection","salience":0.30950307846069336},{"name":"cs1521/bin/mymysh mymysh","salience":0.2208389937877655}],"question":" In ~cs1521/bin/mymysh mymysh$ &lt; asdf will print \"Invalid i/o redirection\" Shouldn't it print \"'&lt;: Command not found\"? ","answers":[" That's one way you could do it. ~cs1521/bin/ mymysh does it another (equally valid) way. Copy what the reference solution does. "," This really just has to do with the order that things are checked in. Try to recreate this error. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"cd","salience":0.27503442764282227},{"name":"&lt","salience":0.19738711416721344},{"name":"directory","salience":0.17163847386837006},{"name":"file","salience":0.17163847386837006},{"name":"solution","salience":0.06994747370481491},{"name":"cd command","salience":0.05430131405591965},{"name":"history command","salience":0.017081359401345253},{"name":"bug","salience":0.01642148196697235},{"name":"setup","salience":0.015022465027868748},{"name":"behaviour","salience":0.011527437716722488}],"question":" In a directory with a file named cd, the provided solution executes the built-in cd command upon the input: *cd &lt;some_filename&gt; Moreover, it does not execute the built-in history command on a similar corresponding setup. Does this constitute a bug, or should we replicate this behaviour? ","answers":[" In a directory with a file named cd, the provided solution executes the built-in cd command This is what I'd expect it to do. I'm not sure what the precise problem is here? If mymysh sees a built-in like cd and h, it processes that and doesn't bother looking for a command with that name in the PATH. A file with the name cd would never be executed, even if the x flag was on. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"auto tests","salience":0.24950389564037323},{"name":"question","salience":0.16537094116210938},{"name":"thanks","salience":0.08085806667804718},{"name":"yinan feng","salience":0.0478890985250473},{"name":"cs1521/bin/mymysh &lt","salience":0.0467592291533947},{"name":"autotest","salience":0.037870630621910095},{"name":"mistakes","salience":0.030383523553609848},{"name":"&lt","salience":0.0303515437990427},{"name":"assignment","salience":0.026069864630699158},{"name":"footer&gt","salience":0.025797799229621887},{"name":"testing","salience":0.023934276774525642},{"name":"header&gt","salience":0.02091018296778202},{"name":"course","salience":0.02091018296778202},{"name":"space","salience":0.02078515850007534},{"name":"advance","salience":0.020711978897452354},{"name":"stage","salience":0.019190266728401184},{"name":"&lt","salience":0.017606856301426888},{"name":"fileofcommands","salience":0.01656237058341503},{"name":"obs","salience":0.014438929036259651},{"name":"format","salience":0.013864410109817982},{"name":"john shepherd","salience":0.012224823236465454},{"name":"header&gt","salience":0.012224823236465454},{"name":"e.g.","salience":0.011356139555573463},{"name":"something","salience":0.008005501702427864},{"name":"file","salience":0.00790979340672493},{"name":"sequence","salience":0.007907670922577381},{"name":"shell commands","salience":0.006337383762001991},{"name":"mymysh","salience":0.004264655988663435}],"question":" Just poking this question, will any auto tests be available before the due time? Thanks! _____________________________ Yinan Feng 10 days ago Hi, I wonder can we have some autotest to make sure we do not have silly mistakes including format(\\n,space...) Thank you in advance! &lt;header&gt; John Shepherd 10 days ago &lt;/header&gt;Once I've finished writing an assignment for my other course, I'll put up some testing stuff.However, but this stage, you ought to be able to do testing yourself ...E.g. write a sequence of shell commands in a file, then do something like: ./mymysh &lt; FileOfCommands &gt; out.obs ~cs1521/bin/mymysh &lt; FileOfCommands &gt; out.exp diff out.obs out.exp After all, this is what we do for auto-testing.&lt;footer&gt; &lt;/footer&gt; ","answers":[" Some testing suggestions are now available. Auto-testing, no. See the Notice. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"output","salience":0.4028864800930023},{"name":"outpu","salience":0.4028864800930023},{"name":"error names","salience":0.1350979059934616},{"name":"directories","salience":0.03361357003450394},{"name":"suggestions","salience":0.025515571236610413}],"question":" My output the correct outpu i cant figure out how to get the error names correct and still have them launch to the correct directories. do you have any suggestions? ","answers":[" your code: Execve(tokens[0], tokens, envp) Example code: Execve(command, tokens, envp) The example doesn't modify the tokens array with the full path but creates a new variable, while you are modifying the tokens array. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"questions","salience":0.2483847737312317},{"name":"tokens","salience":0.1886412799358368},{"name":"redirects","salience":0.12320424616336823},{"name":"filename","salience":0.047270774841308594},{"name":"tokens","salience":0.03987111151218414},{"name":"&lt","salience":0.03382476791739464},{"name":"output","salience":0.03239281475543976},{"name":"command line","salience":0.03239281475543976},{"name":"example","salience":0.03239281475543976},{"name":"input","salience":0.03239281475543976},{"name":"possibility","salience":0.03239281475543976},{"name":"cases","salience":0.03199954330921173},{"name":"command","salience":0.027807245030999184},{"name":"token","salience":0.027807245030999184},{"name":"executable","salience":0.022303445264697075},{"name":"command","salience":0.019496679306030273},{"name":"input.txt &gt","salience":0.01762179285287857},{"name":"part","salience":0.009803014807403088}],"question":" Several questions: 1. In both redirects, it is written: \"tokens [' &gt;' | '&lt;'] and a filename as the last two tokens\" does it mean that we can treat both cases separately (we can ignore the possibility of input and output in the same command line, example: $ ./executable &lt; input.txt &gt; output.txt) ? 2. In the history part, what does it mean by: \"an executable for the command (first token) actually exists\" isn't all executable counted as valid command? or am I getting it wrong (?) ","answers":[" 1. Getting both an input and output redirection is an error, only one is allowed at a time. 2. If the user enters a command that doesn't exists, eg cta instead of cat then cta isn't added to the history. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"program","salience":0.35843855142593384},{"name":"pipe","salience":0.35019373893737793},{"name":"thanks","salience":0.1248617172241211},{"name":"anywhere","salience":0.11430646479129791},{"name":"liz","salience":0.05219951644539833}],"question":" Hi, Should I be concerned that my program works but I haven't used pipe() anywhere? Thanks, Liz. ","answers":[" You don't necessarily need the pipe function, it would be useful in the challenge though! ",[" Thanks! "]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"few","salience":0.11716505140066147},{"name":"follow errors","salience":0.11450158804655075},{"name":"valgrind","salience":0.10493753105401993},{"name":"code","salience":0.061621032655239105},{"name":"value","salience":0.043127257376909256},{"name":"stack allocation","salience":0.0409558080136776},{"name":"jump","salience":0.03605563938617706},{"name":"move","salience":0.03605563938617706},{"name":"value","salience":0.033054169267416},{"name":"values","salience":0.032655928283929825},{"name":"memory leaks","salience":0.03117630071938038},{"name":"size","salience":0.030808499082922935},{"name":"size","salience":0.030808499082922935},{"name":"value","salience":0.029277849942445755},{"name":"size","salience":0.02829831652343273},{"name":"heap allocation","salience":0.027794089168310165},{"name":"uninitialised","salience":0.026715239509940147},{"name":"use","salience":0.024748945608735085},{"name":"write","salience":0.024748945608735085},{"name":"block","salience":0.022726938128471375},{"name":"address","salience":0.022726938128471375},{"name":"memcheck","salience":0.017166588455438614},{"name":"valgrind","salience":0.014562726020812988},{"name":"errors","salience":0.009425661526620388},{"name":"code","salience":0.008813065476715565},{"name":"warnings","salience":0.008335459046065807},{"name":"errors","salience":0.007223164197057486}],"question":" When I run my code through valgrind, I get a few of the follow errors: \"Uninitialised value was created by a stack allocation\" \"Conditional jump or move depends on uninitialised values\" \"Uninitialised value was created by a heap allocation\" \"Use of uninitialised value of size 4\" \"Invalid write of size 1\" \"Address 0xsome_address is 0 bytes after a block of size 200 was alloc'd\" However, my code seems to work fine, no compile warnings or errors, and valgrind doesn't report any memory leaks with memcheck. Do I need to be concerned about these errors? What causes them and how can I fix them? ","answers":[" This means that you are using a piece of memory as a condition, probably in a loop or if , before you assign a value. It's a good idea to fix this issue, even more than memory leaks as the memory you're using could have any value stored in it. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"files","salience":0.4220810532569885},{"name":"bin","salience":0.12002348899841309},{"name":"commands","salience":0.1099623441696167},{"name":"&lt","salience":0.04383602365851402},{"name":"command.txt&gt","salience":0.04383602365851402},{"name":"output","salience":0.04193403199315071},{"name":"values","salience":0.04092272371053696},{"name":"file","salience":0.03910115733742714},{"name":"shell","salience":0.03194601833820343},{"name":"error","salience":0.019949909299612045},{"name":"output","salience":0.01712195947766304},{"name":"bin","salience":0.014344064518809319},{"name":"output","salience":0.011862111277878284},{"name":"shell","salience":0.010823419317603111},{"name":"error message","salience":0.009511329233646393},{"name":"command.txt&gt","salience":0.008496965281665325},{"name":"cat","salience":0.0075840093195438385},{"name":"type","salience":0.006663366686552763}],"question":" When running the commands: ~cs1521/bin/mymysh&lt;command.txt&gt;exp ./mymysh &lt;command.txt&gt;exp2 I notice that the outputted files have different values, however when output is directly in the shell they are the same. I understand that this is due to stderr when there is an error, however based on the above output I'm not sure what is in stderr?When I run ~cs1521/bin/mymysh&lt;command.txt&gt;exp I get When I run ./mymysh &lt;command.txt&gt;exp2 I get Why would the given shell not output the '-----', below the error message './cat: unknown type of executable'? (cat is just an empty file) ","answers":[" Try doing your redirection using ./mymysh &lt; command.txt &gt; output.txt 2&gt;&amp;1 ",[" Hello, I checked using your command, however it still gives the same output? "]," Your output is more correct, it has to do with the order of error checking in the example i believe. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"cs1521/bin/mymysh","salience":0.15288704633712769},{"name":"assignment","salience":0.05788099393248558},{"name":"program","salience":0.057395122945308685},{"name":"conditions","salience":0.057395122945308685},{"name":"home","salience":0.057395122945308685},{"name":"order","salience":0.057395122945308685},{"name":"sequence number","salience":0.057395122945308685},{"name":"questions","salience":0.05718131735920906},{"name":"line","salience":0.021861607208848},{"name":"characters","salience":0.021186241880059242},{"name":"commands","salience":0.019773317500948906},{"name":"command","salience":0.0195804163813591},{"name":"txt","salience":0.0181091520935297},{"name":"file","salience":0.01689937524497509},{"name":"files","salience":0.01686476357281208},{"name":"sleep","salience":0.01663617044687271},{"name":"sleep","salience":0.01663617044687271},{"name":"command","salience":0.016468796879053116},{"name":"glob","salience":0.015385380946099758},{"name":"cat &lt","salience":0.014760900288820267},{"name":"redirection","salience":0.014760900288820267},{"name":"tokenise","salience":0.014661913737654686},{"name":"example","salience":0.014616740867495537},{"name":"bin","salience":0.013591249473392963},{"name":"myshsh","salience":0.01339542306959629},{"name":"cs1521/bin/mymysh","salience":0.011586751788854599},{"name":"ctrl + c","salience":0.011586751788854599},{"name":"command","salience":0.01042079646140337},{"name":"stdout","salience":0.010156304575502872},{"name":"matches","salience":0.010142429731786251},{"name":"error message","salience":0.010142429731786251},{"name":"ctrl","salience":0.009950689040124416},{"name":"errors","salience":0.009950060397386551},{"name":"*.txt","salience":0.00971133541315794},{"name":"glob_nocheck","salience":0.009100879542529583},{"name":"echo abcd &gt","salience":0.007994525134563446},{"name":"prints","salience":0.007100568152964115},{"name":"execve","salience":0.007096090354025364},{"name":"malloc","salience":0.007096090354025364},{"name":"lot","salience":0.007087776903063059},{"name":"running xxxx","salience":0.007028613705188036},{"name":"file","salience":0.005579461343586445},{"name":"fork","salience":0.004613371100276709},{"name":"*.txt","salience":0.003541578073054552}],"question":" Hi! I have some questions about this assignment. 1. Will our program be tested under some special conditions like $HOME is not set or being provided an invalid .mymysh_history (random order or invalid sequence number, invalid line, ...)? 2. I notice that ~/cs1521/bin/mymysh will also tokenise '\\t', which is the horizontal tab. Are there any other characters that need to be used in tokenise? 3. If I interrupt a command, for example, run `sleep 10' then immediately press Ctrl + c, both sleep and ~cs1521/bin/mymysh will exit. Are we supposed to keep myshsh running when it is running a command and we press Ctrl + c? 4. For the redirection, should we treat the commands like \"cat &lt; *.c\" valid or not if *.c matches exactly 1 file? 5. If I run a command like \"echo abcd &gt; *.txt\" and \"*.txt\" does not match and files, with GLOB_NOCHECK, glob will preserve exactly \"*.txt\" and ~cs1521/bin/mymysh will actually create a file called \"*.txt\". Is this correct or not? 6. Should we print \"Running xxxx ... -------------------- -------------------- Returns xx\" to stdout or stderr? 7. Should the error message printed by our myshsh matches exactly what ~cs1521/bin/mymysh prints? If so, what should be printed if fork(), execve(), malloc(), wait(), etc... fail, since these errors rarely occur. Thanks a lot! ","answers":[" Some of these questions can be answered by \"Do what ~cs1521/bin/mymysh\"does. For those questions, I'll just say \"Follow ~cs1521/bin/mymysh\". 1. Will our program be tested under some special conditions like $HOME is not set or being provided an invalid .mymysh_history (random order or invalid sequence number, invalid line, ...)? No ... they'll be tested under \"normal conditions\". And we're not mean or stupid. If we find that everyone's prrogram is failing because of some assumption we've made, we'll change the tests. 2. I notice that ~/cs1521/bin/mymysh will also tokenise '\\t', which is the horizontal tab. Are there any other characters that need to be used in tokenise? No. It used to tokenise on \" and ' as well, but we stopped doing that a while ago. 3. If I interrupt a command, for example, run `sleep 10' then immediately press Ctrl + c, both sleep and ~cs1521/bin/mymysh will exit. Are we supposed to keep myshsh running when it is running a command and we press Ctrl + c? Follow ~cs1521/bin/mymysh. 4. For the redirection, should we treat the commands like \"cat &lt; *.c\" valid or not if *.c matches exactly 1 file? Follow ~cs1521/bin/mymysh. 5. If I run a command like \"echo abcd &gt; *.txt\" and \"*.txt\" does not match and files, with GLOB_NOCHECK, glob will preserve exactly \"*.txt\" and ~cs1521/bin/mymysh will actually create a file called \"*.txt\". Is this correct or not? Follow ~cs1521/bin/mymysh. 6. Should we print \"Running xxxx ... -------------------- -------------------- Returns xx\" to stdout or stderr? stdout (i.e. Follow ~cs1521/bin/mymysh) 7. Should the error message printed by our myshsh matches exactly what ~cs1521/bin/mymysh prints? If so, what should be printed if fork(), execve(), malloc(), wait(), etc... fail, since these errors rarely occur. You can assume that fork(), malloc(), wait() won't fail. They won't fail during our testing. You can test an execve() failure easily enough, to see what ~cs1521/bin/mymysh does. It would have been useful to ask these kinds of questions two weeks ago, in the period when we were tightening the spec. Too late to change it now. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"&lt","salience":0.5359039306640625},{"name":"command","salience":0.15032531321048737},{"name":"posts","salience":0.07171739637851715},{"name":"spec","salience":0.05035899579524994},{"name":"something","salience":0.04999663680791855},{"name":"anywhere","salience":0.0462520495057106},{"name":"error","salience":0.03495149686932564},{"name":"command.txt &gt","salience":0.02970200777053833},{"name":"token","salience":0.015396096743643284},{"name":"line","salience":0.015396096743643284}],"question":" Do we need to handle '&gt;' and '&lt;' in the command? something like &lt; command.txt &gt; output.txt? In the spec it says having &gt; or &lt; anywhere but the 2nd last token in the line should result in an error but I've been seeing posts that include it. ","answers":[" No command to mymysh should contain both &lt; and &gt; The posts you've been seeing are talking about running mymysh from bash (the real shell) and capturing mymysh 's output. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"glob","salience":0.4840500056743622},{"name":"file expansion","salience":0.16573168337345123},{"name":"space","salience":0.13415396213531494},{"name":"code start","salience":0.1234983503818512},{"name":"maxline","salience":0.09256599098443985}],"question":" when i used the glob() to do the file expansion, i don't know why sometimes an empty space or a messy code start on my buffer[MAXLINE]. Please help me to find out . Thank you ","answers":[" It is impossible to diagnose your problem effectively with this much information. Note that the expanded filenames don't need to go into the command line buffer anyway. They should be added as extra tokens into your tokens array. The *.c should remain in the command like buffer and be stored in the history list. Perhaps you could use gdb to track how the values of tokens[0] (or whatever you call you array of tokens) changes during the execution of your code that does the glob() expansion. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"debug region","salience":0.5318094491958618},{"name":"assignment","salience":0.2868190407752991},{"name":"base code","salience":0.1813715249300003}],"question":" Hi! Should we get rid of the if DEBUG region in the base code for the assignment? ","answers":[" Edit the Makefile and use a version of CFLAGS that doesn't have -DDBUG in it. And then ... make clean; make ",[" But for final submission, does it matter whether we keep the debug portion in, or should we remove it? ",[" We're suppliying the Makefile for auto-testing. We won't run with debugging on. If you add your own debugging output, remove it before submission, or wrap it in #ifdef DBUG ... #endif "]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"issues","salience":0.14829133450984955},{"name":"cat command printing output","salience":0.1367025226354599},{"name":"order","salience":0.1367025226354599},{"name":"cat","salience":0.07117599993944168},{"name":"command","salience":0.06069183349609375},{"name":"file","salience":0.04504410922527313},{"name":"cat","salience":0.04504410922527313},{"name":"directory","salience":0.03834909945726395},{"name":"file","salience":0.037104688584804535},{"name":"lines","salience":0.036735616624355316},{"name":"bin","salience":0.03629233315587044},{"name":"abc","salience":0.03620663657784462},{"name":"file","salience":0.034080635756254196},{"name":"&gt","salience":0.028173156082630157},{"name":"program","salience":0.025500575080513954},{"name":"sample shell","salience":0.01789478398859501},{"name":"cat","salience":0.015044565312564373},{"name":"file","salience":0.015044565312564373},{"name":"abc","salience":0.012785511091351509},{"name":"directory","salience":0.012785511091351509},{"name":"way","salience":0.010349877178668976}],"question":" Hi, I'm experiencing issues with the cat command printing output in different order When I run the command \"cat *.h &gt;&gt; abc\" using ~cs1521/bin/mymysh I get this: However, when I run using ./mymysh i get: The two lines \"cat: &gt;&gt;: No such file or directory\" and \"cat: abc: No such file or directory\" are being printed before the .h file in my program but after the .h file in the sample shell. Is there any way to fix this? ","answers":[" mymysh doesn't handle &gt;&gt; It's producing the correct response in this case. "," It looks like you convert cat *.h &gt;&gt; abc to cat &gt;&gt; abc history.h. When you expand wildcards, you should expand in place. Hence it should be converted to cat history.h &gt;&gt; abc "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"file name expansion function","salience":0.3904222548007965},{"name":"wild card","salience":0.26441624760627747},{"name":"wildcards","salience":0.2047329843044281},{"name":"thanks","salience":0.14042851328849792}],"question":" Hey. I was wondering why my file name expansion function did not expand the tilde wild card properly. All the other wildcards seem to work. Thanks. ","answers":[" This is what my program/terminal displays: ",[" The man page for glob explains the different options that can be used with it. I think you'll find your answer there. ",[" Yep consider what Simon said and also consider the hint in the assignment (hint: use GLOB_NOCHECK|GLOB_TILDE as the second parameter of the glob() function) "]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"dcc","salience":0.22125957906246185},{"name":"spec","salience":0.22125957906246185},{"name":"error","salience":0.05764314904808998},{"name":"runtime error","salience":0.05230508744716644},{"name":"runtime","salience":0.04775676876306534},{"name":"c file","salience":0.0463017113506794},{"name":"template","salience":0.04200262203812599},{"name":"error","salience":0.03332042694091797},{"name":"operation execution","salience":0.03232620656490326},{"name":"null","salience":0.030040647834539413},{"name":"line","salience":0.02876741997897625},{"name":"pointer","salience":0.028417760506272316},{"name":"array","salience":0.027731051668524742},{"name":"execution","salience":0.02212286740541458},{"name":"break","salience":0.019924450665712357},{"name":"values","salience":0.019924450665712357},{"name":"workaround","salience":0.01669848896563053},{"name":"&gt","salience":0.015641292557120323},{"name":"gcc","salience":0.013960549607872963},{"name":"thanks","salience":0.013842273503541946},{"name":"path","salience":0.008753614500164986}],"question":" Hello, As per the spec, I am compiling under dcc. I have compiled the provided (template) mymysh.c file and receive the following error during runtime: mymysh.c:59 runtime error - illegal array, pointer or other operation Execution stopped here in main() in mymysh.c at line 59: //if (envp[0] != NULL) //{ --&gt;for (i = 0; envp[i] != NULL; i++) { if (strncmp(envp[i], \"PATH=\", 5) == 0) break; } Values when execution stopped: i = 0 envp[i] = \"\" This error does not happen with gcc. Is there a workaround for this? Thanks, ","answers":[" As per the spec, I am compiling under dcc. That was a typo in the spec. It should have been gcc . And the Makefile uses gcc . I can't see why dcc should be complaining. I'd need to see the rest of your code. ",[" I have the same issue but it occurs when i run the shell. I've tried recompiling using both dcc and gcc but same error occurs ",[" As I said, I'd need to see the rest of the code to see what you've done wrong with envp[ ], which is the most likely cause of such an error. "]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"token","salience":0.18760667741298676},{"name":"result","salience":0.17900510132312775},{"name":"glob","salience":0.14475788176059723},{"name":"code","salience":0.06234777346253395},{"name":"result","salience":0.03347471356391907},{"name":"tilde\\n","salience":0.02685876004397869},{"name":"printf","salience":0.02685876004397869},{"name":"tokens","salience":0.024067262187600136},{"name":"tokens","salience":0.02377450279891491},{"name":"question","salience":0.023691963404417038},{"name":"int","salience":0.02360868640244007},{"name":"strcpy","salience":0.022630196064710617},{"name":"strcpy","salience":0.021048642694950104},{"name":"strcpy","salience":0.018151842057704926},{"name":"value","salience":0.017380502074956894},{"name":"tilde","salience":0.016864517703652382},{"name":"tokens","salience":0.016478845849633217},{"name":"home directory","salience":0.0148189477622509},{"name":"path","salience":0.0148189477622509},{"name":"space","salience":0.014778432436287403},{"name":"tokens","salience":0.011544241569936275},{"name":"array elements","salience":0.011216030456125736},{"name":"strcpy","salience":0.008807129226624966},{"name":"help","salience":0.007736829109489918},{"name":"tokenise","salience":0.007299337536096573},{"name":"e.g.","salience":0.006543032359331846},{"name":"array","salience":0.005554697941988707},{"name":"errors","salience":0.005383702926337719},{"name":"function","salience":0.004890089854598045},{"name":"pointer","salience":0.004879134241491556},{"name":"operation","salience":0.004879134241491556},{"name":"&amp","salience":0.0045740967616438866},{"name":"someone","salience":0.0036695862654596567}],"question":" Hi, I'm currently trying to replace the ~ token with the result from glob(). EDIT : Removed code. Left what was most needed for the question. glob_t result; int i; printf(\"Found a tilde\\n\"); printf(\"Corresponds to: %s\\n\", *result.gl_pathv); strcpy(tokens[i], *result.gl_pathv); I had thought that a simple strcpy(tokens[i], *result.gl_pathv) would be fine to pass the value across to replace the tilde with the path to the home directory. I had thought this would be fine as the space has already been malloced from the tokenise() function. However, I'm receiving errors related to illegal array, pointer or other operation. Could someone please explaing to me what I'm not understanding here. I have also tried using array elements. E.g. strcpy(tokens[0], result.gl_pathv[0]); strcpy(&amp;tokens[0], result.gl_pathv[0]) Thank you for any help. ","answers":[" Hey Joe, not sure but maybe when tokens was malloc'd the amount of space allocated is less than you need to copy the expanded HOME directory into the same location. You could maybe create your own char ** array and malloc it to copy the strings from result.gl_pathv or maybe pass the actual result struct itself back to main and read through the expanded paths in result.gl_pathv. This would require a bit of tweaking though as the result.gl_pathv array doesn't hold the executable name and any of switches that execve needs so it needs to be massaged a bit to work. Using GLOB_DOOFFS with glob allows x number of slots to be left available at the beginning where other strings could be copied to. i.e. executable name. ",[" Thanks for that Simon. "]," Please remove your code from the forum. If you need to share code please do it by email. The problem is size expanding a ~ results in a much larger string than what you started with and tokens[0] hasn't got the space for it. You could either: 1. Realloc tokens[0] 2. Free tokens[0] then strdup into it 3. Free tokens[0] then assign it as a pointer. ",[" Sorry Dylan. Have removed the code and left what is needed for the question to make sense. Let me know if I need to remove that too. I'll give your suggestions a try. Thanks "]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"array","salience":0.10981946438550949},{"name":"command","salience":0.09612954407930374},{"name":"command","salience":0.07376684248447418},{"name":"tokens","salience":0.04730449616909027},{"name":"switch arguments","salience":0.04216257110238075},{"name":"list","salience":0.035230495035648346},{"name":"char","salience":0.031214823946356773},{"name":"function","salience":0.031214823946356773},{"name":"trouble","salience":0.02850368060171604},{"name":"globbing","salience":0.026831509545445442},{"name":"execution","salience":0.025072893127799034},{"name":"j","salience":0.02369098924100399},{"name":"tokens","salience":0.02282498963177204},{"name":"glob_command","salience":0.018077528104186058},{"name":"elements","salience":0.015076838433742523},{"name":"element","salience":0.015002247877418995},{"name":"filenameexpand","salience":0.014881610870361328},{"name":"paths","salience":0.013690156862139702},{"name":"number","salience":0.013690156862139702},{"name":"paths","salience":0.013690156862139702},{"name":"number","salience":0.013690156862139702},{"name":"args","salience":0.012032276950776577},{"name":"tokens","salience":0.00862851645797491},{"name":"tokens","salience":0.00862851645797491},{"name":"tokens","salience":0.008609237149357796},{"name":"print statements","salience":0.007353600580245256},{"name":"tokens","salience":0.0068895951844751835},{"name":"command","salience":0.00676559004932642},{"name":"tokens","salience":0.006479302886873484},{"name":"ls -l","salience":0.006440659053623676},{"name":"string","salience":0.006440659053623676},{"name":"switch arguments","salience":0.006440659053623676},{"name":"null","salience":0.006385784596204758},{"name":"tokens","salience":0.00589723652228713},{"name":"tokens","salience":0.00589723652228713},{"name":"tokens","salience":0.00589723652228713},{"name":"tokens","salience":0.005825234577059746},{"name":"tokens","salience":0.005825234577059746},{"name":"tokens","salience":0.005825234577059746},{"name":"tokens","salience":0.005825234577059746},{"name":"char","salience":0.005658374167978764},{"name":"char","salience":0.005658374167978764},{"name":"switch","salience":0.005491527263075113},{"name":"switch","salience":0.005479238927364349},{"name":"malloc","salience":0.005161523353308439},{"name":"output","salience":0.0051272534765303135},{"name":"switch","salience":0.00501811970025301},{"name":"switch","salience":0.00501811970025301},{"name":"switch %","salience":0.004824264906346798},{"name":"printf","salience":0.004622732289135456},{"name":"printf","salience":0.004622732289135456},{"name":"printf","salience":0.004622732289135456},{"name":"printf","salience":0.004566258285194635},{"name":"printf","salience":0.004566258285194635},{"name":"values","salience":0.004436311312019825},{"name":"argument","salience":0.004390654154121876},{"name":"string","salience":0.004346741363406181},{"name":"d","salience":0.004142094869166613},{"name":"ls -l","salience":0.004028604365885258},{"name":"function","salience":0.0038183319848030806},{"name":"strcpy function","salience":0.003538805525749922},{"name":"strcpy","salience":0.0035258859861642122},{"name":"loop","salience":0.0034827899653464556},{"name":"switch argument","salience":0.003393031656742096},{"name":"glob_command_size","salience":0.0033711118157953024},{"name":"condition statement","salience":0.0032277903519570827},{"name":"debugging","salience":0.003090181853622198},{"name":"light","salience":0.003037218004465103},{"name":"line","salience":0.0028352264780551195},{"name":"above","salience":0.002378184348344803},{"name":"found","salience":0.002087838016450405},{"name":"glob_command array","salience":0.0019974822644144297},{"name":"element","salience":0.0018598302267491817},{"name":"j++","salience":0.0018264632672071457},{"name":"issue","salience":0.0017483590636402369},{"name":"loop","salience":0.001696258899755776},{"name":"strings","salience":0.0016378947766497731},{"name":"hd xxx 'w'w'w'w'w'w'w'w glob_command","salience":0.001573106157593429},{"name":"something","salience":0.0014898309018462896},{"name":"memory allocation","salience":0.0014898309018462896},{"name":"anyone","salience":0.0014876724453642964},{"name":"content","salience":0.001474024960771203},{"name":"hd xxx 'w'w'w'w'w'w'w'w glob_command","salience":0.0014015613123774529},{"name":"strings","salience":0.001328629325143993},{"name":"garbage","salience":0.0013194377534091473},{"name":"array","salience":0.0012533132685348392},{"name":"two","salience":0.0011960053816437721},{"name":"troubleshooting","salience":0.001064256182871759},{"name":"part","salience":0.0009347070590592921}],"question":" Hi, I am having trouble with the char **glob_command array I am using within the fileNameExpand() function to hold the (possibly larger) list of tokens to return back to main for execution. I can't seem to populate it with more than two string elements. I malloc the array as below based on the number of expanded paths in the paths struct after globbing plus the number of switch arguments identified in tokens (args starting with '-') plus an extra element to hold the command being executed. I have confirmed the values used to calculate glob_command_size are correct while debugging this. char **glob_command; glob_command_size = paths.gl_pathc + switch_count + 1; glob_command = malloc(glob_command_size*sizeof(char *)); I am testing with a command such as \"ls -l -a *\" (intentionally with multiple switch arguments) and I am able to copy the first string (the command) from tokens to glob_command strcpy(glob_command[0], tokens[0]); Debugging output from above command was: glob_command[0] is now ls But when I then use a loop to copy all switch arguments starting with '-' from tokens to glob_command I can only copy one string before the function breaks: for ( i = 1 , j = 1 ; tokens[i] != NULL ; i++){ printf(\"Current j is %d and i is %d\\n\", j , i); printf(\"Current tokens[%d] %s\\n\", i,tokens[i]); if (tokens[i][0] == '-'){ printf(\" Found switch\\n\"); strcpy(glob_command[j], tokens[i]); printf(\" Copied switch %s\\n\", tokens[i]); printf(\" glob_command[%d] is now %s\\n\", i , glob_command[i]); j++; } } I have performed debugging by adding print statements and can confirm the second switch (-a) argument in the command \"ls -l -a *\" is matched by the the line \"if (tokens[i][0] == '-')\" but the strcpy function following that condition statement fails. glob_command[0] is now ls Current j is 1 and i is 1 Current tokens[1] -l Found switch Copied switch -l glob_command[1] is now -l Current j is 2 and i is 2 Current tokens[2] -a Found switch -------------------- Returns 0 mymysh$ As part of my troubleshooting after mallocing glob_command I printed its content expecting all strings in the array to be (null) but found the first two seemed to hold garbage as shown below and I am not sure if this is related to why I can only copy two strings (the command to execute and the first matched switch argument) to it or not: glob_command[0] is hD X X X 'w'w'w'w'w'w'w'w glob_command[1] is hD X X X 'w'w'w'w'w'w'w'w glob_command[2] is (null) glob_command[3] is (null) glob_command[4] is (null) glob_command[5] is (null) glob_command[6] is (null) glob_command[7] is (null) glob_command[8] is (null) glob_command[9] is (null) glob_command[10] is (null) glob_command[11] is (null) glob_command[12] is (null) glob_command[13] is (null) glob_command[14] is (null) glob_command[15] is (null) glob_command[16] is (null) glob_command[17] is (null) glob_command[18] is (null) glob_command[19] is (null) I think the issue has something to do with memory allocation but I can't work out why the above for loop fails when trying to added a third element to the glob_command array. Can anyone shed any light on this for me? ","answers":[" The problem your having is how to alloc a 2D array. Glob_commands is an array of pointers but but each element of the array also needs to be alloced as an array of chars. Now fileNameExpand() takes a char** so you can pass tokens directly into it, and if you give glob the GLOB_NOCHECK flag glob will do all if this for you as glob mallocs the strings it returns. ",[" So do I need to malloc within a loop? First mallocing the outer array and then traversing through it to malloc each inner array? ",[" For a array of strings, normally, yes. but the strings returned from glob are already malloced so you shouldnt need to. ",[" Thanks Dylan, I was original using the array within the glob struct but it seemed a bit fiddly as I needed to use realloc to get it working properly so I decided to rewrite this section by copying the content out of the glob output into a char ** array. I seemed to have got it working now though. Thanks for your help. "]]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"permission","salience":0.3475789427757263},{"name":"o_creat","salience":0.1670621931552887},{"name":"file","salience":0.14773403108119965},{"name":"output file","salience":0.09656194597482681},{"name":"outputfilename","salience":0.07863426953554153},{"name":"permission","salience":0.048300620168447495},{"name":"perror","salience":0.03881995752453804},{"name":"file","salience":0.029927752912044525},{"name":"advance","salience":0.018694646656513214},{"name":"permission","salience":0.014729904010891914},{"name":"cat command","salience":0.011955742724239826}],"question":" Permission denied with open( , O_CREAT) Hi, I was trying to use open(\"outputFileName\", O_CREAT) to have a output file to redirect. But by perror, it showed \"Permission denied\". The file was created, but showed \"Permission denied\" again when using cat command to inspect this file. How could this be solved? Thank you in advance!!! ","answers":[" I am still trying to perfect file output redirection myself but I think you'll find you need to tweak your permission flags when calling open(). have a look at 'man 2 open' and there are a bunch of options you can use with O_CREATE to set the permissions on the file you create. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"notation","salience":0.1699782907962799},{"name":"command","salience":0.15088309347629547},{"name":"strings","salience":0.11385632306337357},{"name":"example","salience":0.11385632306337357},{"name":"command","salience":0.0961536094546318},{"name":"shell","salience":0.07859224826097488},{"name":"bin","salience":0.07859224826097488},{"name":"linux bash command","salience":0.04681413248181343},{"name":"assignment","salience":0.04622817412018776},{"name":"command","salience":0.035390157252550125},{"name":"sfihkdff","salience":0.03009859099984169},{"name":"bash","salience":0.015737958252429962},{"name":"spec","salience":0.012172081507742405},{"name":"coommand","salience":0.011646777391433716}],"question":" When I run the special notation for re-executes the previous command with additional strings behind (for example: \"!!sfihkdff\" ) in the ~cs1521/bin/mymysh shell, it still re-executes the previous command. However from the linux bash command, it doesn't execute the previous coommand and shows \"bash: sfihkdff: command not found\". So for this assignment which spec should I follow? ","answers":[" mymysh isn't bash, you should stick with the example and just ignore everythong folloing \"!!\". "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"bin","salience":0.2171749323606491},{"name":"feature","salience":0.18788786232471466},{"name":"cd home","salience":0.17109166085720062},{"name":"cd","salience":0.1690952330827713},{"name":"feature","salience":0.11999080330133438},{"name":"code","salience":0.07468190789222717},{"name":"spec","salience":0.060077592730522156}],"question":" When I run ~cs1521/bin/mymysh with \"cd\" it automatically cd home, but this feature is not the spec, should we modify this feature in our code? ","answers":[" Your shell should do this yes. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"return status","salience":0.3352668285369873},{"name":"reason","salience":0.28490933775901794},{"name":"child process","salience":0.11555155366659164},{"name":"reference soln","salience":0.09913123399019241},{"name":"times","salience":0.07905436307191849},{"name":"problems","salience":0.02705957368016243},{"name":"reference soln","salience":0.023551277816295624},{"name":"soln","salience":0.023551277816295624},{"name":"will","salience":0.011924553662538528}],"question":" For some reason the return status of my child process is always 256 times larger than that of the reference soln. Is it safe to just divide mine by 256 or will that potentially cause problems later? Reference soln My soln ","answers":[" you need to use the WEXITSTATUS function described by man 2 wait ",[" Ahh I see. Thanks "]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"cleancommandhistory","salience":0.3985065221786499},{"name":"memory","salience":0.3394784927368164},{"name":"history functions","salience":0.20975078642368317},{"name":"memory leaks","salience":0.05226419121026993}],"question":" Is cleanCommandHistory() needed if I free() allocated memory as I go along in my other history functions? Or is it recommended to write the free()s for cleanCommandHistory() to make it easier when marking memory leaks? ","answers":[]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"mymysh","salience":0.4069973826408386},{"name":"command","salience":0.15335489809513092},{"name":"x","salience":0.15335489809513092},{"name":"sequence number","salience":0.06107345223426819},{"name":"sequence number","salience":0.06107345223426819},{"name":"history file","salience":0.058427147567272186},{"name":"history file","salience":0.022110983729362488},{"name":"commands","salience":0.020185839384794235},{"name":"history file","salience":0.015393512323498726},{"name":"versions","salience":0.01234923955053091},{"name":"max - 20","salience":0.009732089005410671},{"name":"syntax","salience":0.008656918071210384},{"name":"code","salience":0.008656918071210384},{"name":"thanks","salience":0.008633265271782875}],"question":" Hi, The example mymysh returns No command X for X at a sequence number 20 less than the highest sequence number. However, for my history file, I have saved all historical commands such that !1 to !999 can all be accessed providing they exist. Do I have to make them not exist for MAX - 20. Furthermore, is it possible to create a differently named history file such as .mymysh_history New so that if prior versions of the history file with invalid syntax exists, it does not effect your code? Thanks. ","answers":[" The internal history and the history file should both only have a max of MAXHIST(20) items in them. history shouldn't stop at 999 either, any positive integer should work. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"error","salience":0.4368478059768677},{"name":"code","salience":0.34041866660118103},{"name":"parts","salience":0.14956898987293243},{"name":"initcommandhistory function","salience":0.07316452264785767}],"question":" Hi, I keep getting this error. I've commented some parts of my code out and it runs fine if i comment out my initcommandhistory function. ","answers":[" You are trying to free unallocated memory. run gdb or valgrind to find where. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"idea","salience":0.17056486010551453},{"name":"file","salience":0.09735868126153946},{"name":"file","salience":0.08953053504228592},{"name":"error message","salience":0.08203795552253723},{"name":"terminal","salience":0.07632649689912796},{"name":"input redirection","salience":0.0731390044093132},{"name":"directory","salience":0.0731390044093132},{"name":"command.txt &gt","salience":0.06348037719726562},{"name":"terminal","salience":0.05782046169042587},{"name":"cs1521/bin/mymysh &lt","salience":0.05294016748666763},{"name":"file","salience":0.04778750240802765},{"name":"hint","salience":0.04561889171600342},{"name":"message","salience":0.04017111659049988},{"name":"file","salience":0.030084941536188126}],"question":" Hi, When I was running ~cs1521/bin/mymysh &lt; command.txt &gt; exp , for (wc *.*) command I found error message \"Input redirection: No such file or directory\" will be printed in terminal but not exp file, all other message printed in file except this I have no idea about when it should be printed in terminal rather than in file, can I get some hint about it? ","answers":[" If you want to capture all of the output from mymysh , try the command: ~cs1521/bin/mymysh &lt; command.txt &gt; exp 2&gt;&amp;1 "," Looks like that message is being printed to stderr not stdout. This is because this error is produced by perror not printf. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"&gt","salience":0.32878467440605164},{"name":"cat","salience":0.12668322026729584},{"name":"&lt","salience":0.08656246215105057},{"name":"file","salience":0.06131934002041817},{"name":"directory","salience":0.04933886602520943},{"name":"input redirection","salience":0.048745930194854736},{"name":"program","salience":0.047580961138010025},{"name":"myout file","salience":0.041657160967588425},{"name":"sample solution","salience":0.021612664684653282},{"name":"file","salience":0.0194082111120224},{"name":"stdout","salience":0.01634848304092884},{"name":"printing","salience":0.016267532482743263},{"name":"sample solution","salience":0.015029500238597393},{"name":"error message","salience":0.014931173995137215},{"name":"fork","salience":0.014931173995137215},{"name":"glass","salience":0.013998349197208881},{"name":"output","salience":0.01257725153118372},{"name":"import","salience":0.011223343200981617},{"name":"glass","salience":0.009809005074203014},{"name":"glass","salience":0.009809005074203014},{"name":"difference","salience":0.009451871737837791},{"name":"export","salience":0.007862011902034283},{"name":"sample solution","salience":0.006628812290728092},{"name":"solution","salience":0.006605421658605337},{"name":"cd","salience":0.002833577571436763}],"question":" When I run ./mymysh &lt; test0 &gt; myout where test0 has cat &lt; doesntexist.c My program will have \"Input redirection: No such file or directory\" in the myout file. With the sample solution, the out file doesn't have it, but instead prints it to stdout. I have tried moving the printing of the error message inside the fork and outside but still doesn't reproduce the output of the sample solution. Also, When I run cd ~ On my solution I get: /import/glass/2/z5112735 On the sample solution I get: /tmp_amd/glass/export/glass/2/z5112735 Is this difference significant? ","answers":[" On my solution I get: /import/glass/2/z5112735 On the sample solution I get: /tmp_amd/glass/export/glass/2/z5112735 Is this difference significant? Did you run both commands on the same machine? ",[" I ran it on the same machine but I had opened two terminal windows ",[" Were the shells in both windows running on the same machine? In any case, the difference doesn't matter. ",[" Yes, the shells were running on the same machine. I tried it again with just one terminal and ran the same tests. The only difference was once again the result of cd ~. Surprisingly, when I cd ~ in my own shell, and then pwd, the directory printed is /tmp_amd/glass/export/glass/2/z5112735. So the only time I get the weird /import/glass/2/z5112735 is the result after calling the cd ~ command I assume from what you're saying that this difference won't affect the autotesting of my shell then? "]]]," If the redirect isn't working on the sample then the sample is printing to stderr. You should end up in the same place. How are you getting the home directory? ",[" They both seem to be the home directory (ls providers the same result) . i used the following command to goto home Chdir(getenv(\"HOME\")) "]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"errors","salience":0.4026221036911011},{"name":"cse machine","salience":0.25036418437957764},{"name":"text","salience":0.18920554220676422},{"name":"make","salience":0.11420229077339172},{"name":"c","salience":0.01441635750234127},{"name":"issue","salience":0.010684257373213768},{"name":"pls help","salience":0.008849313482642174},{"name":"mymysh.c","salience":0.0063529424369335175},{"name":"history.h","salience":0.003303009318187833}],"question":" Running make produces very strange errors which I don't understand nor know how to fix: The white text is a CSE machine and the green text is my mac. I have #included history.h in mymysh.c and in history.c, so I am not sure what the issue is. PLS help ","answers":[" Why do you have a main() function in history.o ? To me, it looks like an issue with your history.o Have you tried make clean and then make ? ",[" I had copy and pasted mymysh.c into history.c ... (*facepalm*) "]," #include \"history.h\" included in both files mymysh.c &amp; history.c // Otherwise, you might need to download all the new files again. Hope it helps mate. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"sample shell","salience":0.15811562538146973},{"name":"redirect input/output","salience":0.15085121989250183},{"name":"question","salience":0.10815094411373138},{"name":"command","salience":0.07474971562623978},{"name":"command","salience":0.06830854713916779},{"name":"pwd","salience":0.05305486172437668},{"name":"abc","salience":0.040602974593639374},{"name":"return value","salience":0.032401397824287415},{"name":"sample shell","salience":0.030230078846216202},{"name":"shell","salience":0.030230078846216202},{"name":"part","salience":0.02110947109758854},{"name":"shell","salience":0.02036276087164879},{"name":"linux system","salience":0.020321417599916458},{"name":"sample shell","salience":0.020236080512404442},{"name":"command","salience":0.01950584352016449},{"name":"command","salience":0.019268907606601715},{"name":"stdout","salience":0.018798556178808212},{"name":"file","salience":0.017146937549114227},{"name":"part","salience":0.017146937549114227},{"name":"file","salience":0.015739409253001213},{"name":"stdout","salience":0.014362113550305367},{"name":"shell","salience":0.01416081003844738},{"name":"linux","salience":0.009211549535393715},{"name":"part","salience":0.008301306515932083},{"name":"file","salience":0.008301306515932083},{"name":"half","salience":0.005151384975761175},{"name":"line","salience":0.004179756157100201}],"question":" Couple question about the sample shell 1. Redirect input/output is not working for the build-in command (pwd, history) in the sample shell, but it is working for the normal shell in the linux system. So I choose to stick with the normal shell of Linux, Is that ok? 2. In the sample shell provided, for command like ls &gt; abc, since the stdout is redirect to the file, part of command like \"Running xxxxxxx... ---------------------------\" is also being redirected to the file as well, so the stdout of the command left to be half of the \"-------------------\" line and the return value, which looks weird to me. So instead, in my own shell, I preserve the whole \"running----\" part , and only redirect the part that is produced by the command to the file, is it okay to do that? ","answers":[" So I choose to stick with the normal shell of Linux, Is that ok? No. The spec asked you to implement a clone of the reference shell, not a clone of the real shell. "," redirection should not work for Inbuilts, it's in the spec. Only the outup of the command itself should be redirected, that's a bug in the example. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"code","salience":0.3371524214744568},{"name":"terminal","salience":0.15414783358573914},{"name":"out.obs","salience":0.15138185024261475},{"name":"output","salience":0.10555554926395416},{"name":"output","salience":0.09709461033344269},{"name":"file","salience":0.0930674821138382},{"name":"terminal","salience":0.033095020800828934},{"name":"hint","salience":0.0285052303224802}],"question":" Hi, My code works well on terminal, but when I am trying to put the output to file(out.obs), it have different output from what I have in terminal, I can not figure out why. Can I get some hint on that? ","answers":[" ls output output one file per line when not outputting to a terminal. This is intended behavior. The order is wrong because of buffering but this is the correct output for this assessment and the example program does the same. ",[" This is what my program ptint ",[" But my file even not print Running /bin/ls ... -------------------- Makefile b.txt cmd.txt history.h mymysh mymysh.o out.obs a.txt c.txt history.c history.o mymysh.c out.exp these lines which suppose to be printed. It works well in terminal I have no idea why it does not work when print to a file "]],[" But my file even not print Running /bin/ls ... -------------------- Makefile b.txt cmd.txt history.h mymysh mymysh.o out.obs a.txt c.txt history.c history.o mymysh.c out.exp these lines which suppose to be printed. It works well in terminal I have no idea why it does not work when print to a file ",[" ok so only two lines are missing Running... And --------------------- This could be because your printing this inside the fork not before it. Other than that I would need to see your code. ",[" Yes I do it inside the fork, so we must do it before the fork? But these things listed must be inside the fork(print by execve function) Makefile b.txt cmd.txt history.h mymysh mymysh.o out.obs a.txt c.txt history.c history.o mymysh.c out.exp So how can we print that before fork()? I miss them as well ",[" That is printed by ls and is being printed. At the top of the file, one line for each item. And that is expected. ",[" Thank you very much Dylan. I just have another 2 questions. 1.when we use history command the definitly $ ~cs1521/bin/mymysh will behave different from our owns. since the command stored in txt file is different. And that does not matter right?? 2. the struct returned in glob() function are different for mac and cse serve one(according to man), I search on google, almost all answers follows the mac one rather than cse one, do we need to use the cse one and will the test run in this environment? ",[" I don't quite understand your first question. You program needs to run on cse. Use man in the cse server as your guide to glob(). ",[" when we use ./mymysh &lt; command.txt &gt; out.obs ~cs1521/bin/mymysh &lt; command.txt &gt; out.exp diff out.obs out.exp command to check whether out output is same as the ~cs1521/bin/mymysh, all other command will be fine exccept the \"h\" or \"history\" command, The output for these two will be different since they have different history and create .mymysh_history file in different place so that is supposed to happen and does not matter right? Thank you in advance! ",[" The history file is the same so that's not a problem, the shell never prints its own path so that shouldn't be a problem either. ",[" but when testing by ./mymysh &lt; command.txt &gt; out.obs ~cs1521/bin/mymysh &lt; command.txt &gt; out.exp diff out.obs out.exp they will not run at the same time, so when we first run ./mymysh some history recorded and when we start to run ~cs1521/bin/mymysh, some history have already recorded in the history file, so if we run \"h\" command, will we have different result? Thank you in advance "]]]]]]]]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"file","salience":0.6755234003067017},{"name":"terminal","salience":0.14716055989265442},{"name":"directory","salience":0.13722452521324158},{"name":"someone","salience":0.04009149968624115}],"question":" when i run ./mymysh on terminal it returns No such file or directory can someone tell me why that happened please? ","answers":[" you need to run make first. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"redirect part","salience":0.778309166431427},{"name":"&gt","salience":0.09362499415874481},{"name":"something","salience":0.07009720057249069},{"name":"advance","salience":0.057968612760305405}],"question":" For redirect part, we only need to handle \"&lt;\" and \"&gt;\" (write to/read from) We do not need to handle something like \"&gt;&gt;\"(append) right? Thank you in advance! ","answers":[" you don't need to handle append no. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"trim","salience":0.33103349804878235},{"name":"copy","salience":0.32732605934143066},{"name":"history.c","salience":0.23501598834991455},{"name":"function","salience":0.10662445425987244}],"question":" Can we make a copy of the trim () function in history.c? ","answers":[" Definitely. Although as the history lines are in a known format you don't necessarily need it. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"mymysh","salience":0.19610290229320526},{"name":"bug","salience":0.18185259401798248},{"name":"i/o redirection","salience":0.18014894425868988},{"name":"c files","salience":0.17056691646575928},{"name":"symbols","salience":0.13646507263183594},{"name":"terminal","salience":0.13486355543136597}],"question":" When I type into the given mymysh: I get the .c files printed to terminal as well as some random symbols. I'm assuming this is a bug, so should the correct output be 'Invalid i/o redirection'? ","answers":[" &gt;&gt; isn't a recognized symbol so it is just passed to cat as a file name. ",[" O, Thank you ! "]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"increment","salience":0.5095287561416626},{"name":"sequence number","salience":0.30869629979133606},{"name":"command","salience":0.12930843234062195},{"name":"problems","salience":0.030809538438916206},{"name":"implementation","salience":0.0216569472104311}],"question":" Should the sequence number still increment with an invalid command, even if it is not saved to history? I had assumed not but have just realised I'm not sure, and this would definitely cause problems with my current implementation. ","answers":[" I believe an invalid command does not increment the sequence number as it's not placed into history. You can check with the testing shell at ~cs1521/bin/mymysh "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"directory","salience":0.7063560485839844},{"name":"file","salience":0.08199512213468552},{"name":"nothing","salience":0.05819765850901604},{"name":"command","salience":0.054832108318805695},{"name":"home/histfile","salience":0.03864123672246933},{"name":"home directory","salience":0.02002342790365219},{"name":"something","salience":0.013512907549738884},{"name":"thanks","salience":0.013446110300719738},{"name":"~/histfile","salience":0.01299540139734745}],"question":" what would be the directory that contains the \".mymysh_history\" file, i tried using \"$HOME/HISTFILE\" but nothing seems to be created after i used the \"ls -a\" command in the home directory. are we supposed to use \"~/HISTFILE\" or something else instead? Thanks! ","answers":[" in your cse terminal, type cd , then pwd , that should be your HOME directory. Otherwise, you can use this command to print out your HOME directory printf(\"your $HOME is : %s\\n\", getenv(\"HOME\")); ",[" Got it, thanks!! "]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"lines","salience":0.150081604719162},{"name":"input redirection","salience":0.14435674250125885},{"name":"problems","salience":0.14435674250125885},{"name":"shell","salience":0.09318425506353378},{"name":"shell","salience":0.062196284532547},{"name":"type","salience":0.050094880163669586},{"name":"something","salience":0.04334628954529762},{"name":"&lt","salience":0.042906735092401505},{"name":"set","salience":0.03866276144981384},{"name":"call","salience":0.034442055970430374},{"name":"stdout","salience":0.034442055970430374},{"name":"shell prompt","salience":0.03402688726782799},{"name":"mymysh","salience":0.029868464916944504},{"name":"commands","salience":0.029058080166578293},{"name":"mymysh","salience":0.02022736705839634},{"name":"test &gt","salience":0.01527954451739788},{"name":"set","salience":0.013118734583258629},{"name":"problem","salience":0.009148843586444855},{"name":"help","salience":0.006135791074484587},{"name":"forum post","salience":0.005065888166427612}],"question":" When I try to run my shell with an input redirection (these problems don't exist when I run the shell and type commands in), e.g. ./mymysh &lt; test The shell prompt gets randomly printed as seen in the mymysh$ right before the second set of lines for each call (I read something online about needing to fflush stdout before forking to fix this). Furthermore, when I try to then output redirect e.g. ./mymysh &lt; test &gt; a Not only are the lines jumbled (similar to a previous forum post) but I'm also missing the \"mymysh$ Running xxx...\" as well as the first set of \"--------\". Any help on this problem would be much appreciated. ","answers":[" are you printing Running ... and --------- inside your fork? If so then that's your second problem. Moving all prints before the fork will probably fix the first problem too. ",[" yep that fixed it, why does it not work as expected when we print inside the fork? "]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"spec","salience":0.4468279182910919},{"name":"read","salience":0.22323545813560486},{"name":"commands section","salience":0.09271937608718872},{"name":"command","salience":0.0788036584854126},{"name":"command executable","salience":0.05939716100692749},{"name":"pathname","salience":0.04255993291735649},{"name":"path","salience":0.025041760876774788},{"name":"path","salience":0.020874321460723877},{"name":"test","salience":0.010540400631725788}],"question":" For the read and write execute commands section, the spec says \"Before the command it should show the full pathname of the command executable\" For a relative path ie ./test, should it show that, or the absolute path? ","answers":[" If it requires a PATH search then you print the full path. if you are given a relative path, ie. starts with \"~\", \".\", or \"/\", then just print it as is. ",[" Just on this point, wouldn't something starting with \"/\" be an absolute path, not a relative path. Would it be more correct to say that in the case of this particular requirement of the assignment that a relative path is something that either starts with \".\" or \"~\" or contains, but doesn't start with, an \"/\"? I am trying to clarify this so also I can be sure I achieve the correct outcome here. Thanks ",[" True. If you are given a relative or absolute path, print what your given. If you need to search PATH, ie you'r given a command name only eg 'cat' then print the full path. ",[" Thanks for the clarification. "]]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"execve function","salience":0.5172653794288635},{"name":"way","salience":0.3982119858264923},{"name":"case","salience":0.08452262729406357}],"question":" Hi, is there some simple way to make execve function fail? I want to test that case. ","answers":[" Try to run a normal text file with the executable bit set. chmod u+x file.txt ",[" Do you mean this? It seems like running well. ",[" Dylan meant ... try to execute the file whose mode you changed ... try running file.txt ",[" Hi, when I run that, mysh got error message \"Exec format error\", but sample got \"unknow type of executable\" I got the message from errno, I have no idea about how to get the same error as sample ",[" By the way, what number should I return when execve fail? I did exit(errno), should I do this? ",[" The error is manually printed. exit(255) "]]],[" Oh yeah, I got it!! Thank you! "]]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"command","salience":0.20734316110610962},{"name":"c","salience":0.17155417799949646},{"name":"ls","salience":0.17155417799949646},{"name":"ls","salience":0.11837448179721832},{"name":"anyone","salience":0.11088710278272629},{"name":"ls *.c","salience":0.06974786520004272},{"name":"picture","salience":0.046111565083265305},{"name":"thanks","salience":0.04598614200949669},{"name":"file","salience":0.029220666736364365},{"name":"dicrectory","salience":0.029220666736364365}],"question":" Hi. When I run command such as \"ls *c\" or \"ls *.c\", print out also \"ls: cannot access *.c: no such file or dicrectory\". Can anyone help me please? picture below. Thanks ","answers":[" are you using the glob() function to expand *.c ? ",[" yes Dylan, ",[" Are you inserting the expanded file names back into the token string in place of *c and *.c before execve 'ing the ls command? ",[" I have inserted the expanded file name command after execve the ls command. But I still get the same problem. Thank you. :) ",[" You're clearly not inserting the glob results into the token string, because the command line arg you pass to ls is *.c What you should be passing as args to ls is glob.c history.c mymysh.c ... etc. "]]]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"arguments","salience":0.4557209014892578},{"name":"history.c","salience":0.3307420313358307},{"name":"functions","salience":0.10606515407562256},{"name":"functions","salience":0.048376645892858505},{"name":"thanks","salience":0.022438161075115204},{"name":"advance","salience":0.022438161075115204},{"name":"history.h file","salience":0.014218950644135475}],"question":" For history.c, are we allowed to change the arguments for some functions? Since if I change the arguments for some functions, I need to change the history.h file as well. Is that allowed? Thanks in advance! ","answers":[" As you give history.h you can modify anything in either file. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"something","salience":0.6353713870048523},{"name":"program","salience":0.14761842787265778},{"name":"bin/mymysh","salience":0.08753412216901779},{"name":"acceptance","salience":0.07953151315450668},{"name":"file","salience":0.049944549798965454}],"question":" Hi, I get something like this in $ ~cs1521/bin/mymysh as well as my own program. So this is acceptance right? (If there is no '\\n' at the end of the file it will looks like it) ","answers":[" this just means the file is incorrectly formatted. This is the intended output. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"reference solution","salience":0.2721773087978363},{"name":"output","salience":0.253359854221344},{"name":"file","salience":0.2276839166879654},{"name":"output","salience":0.18251006305217743},{"name":"order","salience":0.06426885724067688}],"question":" When running the reference solution and redirecting the output to a file, should the order of the output be changed? ","answers":[" are you outputting anything to stderr? sorry this is the referance. Idealy this probably shouldn't happen. It has to do with buffering. 'ls' is smart and knows then its outputting to a file and changes how it outputs, mymysh isn't that smart. There is a work around but it's complicated and uncomfortable. ",[" Hey I'm still confused about what is expected for testing. For example: test02 ls &gt; xyz cat &lt; xyz rm xyz On cse machine: $ ./mymysh &lt; test02 &gt; myout $ ~cs1521/bin/mymysh &lt; test02 &gt; theirout myout: mymysh$ Running /bin/ls ... -------------------- -------------------- Returns 0 mymysh$ Running /bin/cat ... -------------------- Makefile history.c history.h history.o mymysh mymysh.c mymysh.o myout test01 test02 test02&amp; testdir testhist testhist.c theirout xyz -------------------- Returns 0 mymysh$ Running /bin/rm ... -------------------- -------------------- Returns 0 mymysh$ mymysh$ theirout: Makefile history.c history.h history.o mymysh mymysh.c mymysh.o myout test01 test02 test02&amp; testdir testhist testhist.c theirout xyz mymysh$ Running /bin/ls ... -------------------- -------------------- Returns 0 mymysh$ Running /bin/cat ... -------------------- -------------------- Returns 0 mymysh$ Running /bin/rm ... -------------------- -------------------- Returns 0 mymysh$ mymysh$ As you can see the output of ls is written to the file at different times. Does this mean I'll lose marks on the autotests? Should I change my program so that it behaves the same as the model solution shell at all times, include output redirection of this form? ",[" Your output is in the correct place so you won't lose marks. The example output is what I would expect because of buffering, how did you fix that issue? ",[" I got this output by using fflush(stdout) immediately after any text is written to stdout during the execution of main(). Is that OK? ",[" Don't fflush. You are circumventing the buffering being done. The out of order order of output is expected when mymysh is redirected to a file. ",[" Gotcha, thanks "]]]]],[" Also not that 'ls' has different formatting when redirection to a file as well. "],[" A fix for this on your end it to run: stdbuf -i0 -o0 -e0 ~cs1521/bin/mymysh &lt;etc&gt; ",[" Should we use this to run both the reference and our solution when redirecting the output to a file for testing? ",[" If your running for testing don't use it. If your savings a session for debugging or just to look at then do. "]]],[" only if malloc/fopen fails etc ",[" see my edit. "]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"function","salience":0.24520865082740784},{"name":"trim","salience":0.10520701855421066},{"name":"text","salience":0.08493836969137192},{"name":"characters","salience":0.08493836969137192},{"name":"string","salience":0.08493836969137192},{"name":"spaces","salience":0.08493836969137192},{"name":"dcc","salience":0.0775422751903534},{"name":"array index","salience":0.032755784690380096},{"name":"value","salience":0.032755784690380096},{"name":"gcc","salience":0.022066768258810043},{"name":"dcc","salience":0.014352039434015751},{"name":"question","salience":0.012845957651734352},{"name":"outcome","salience":0.012534838169813156},{"name":"behaviour","salience":0.012534838169813156},{"name":"trim","salience":0.012207172811031342},{"name":"trim function","salience":0.010866520926356316},{"name":"c libraries","salience":0.010716870427131653},{"name":"issue","salience":0.010716870427131653},{"name":"machines","salience":0.010716870427131653},{"name":"all","salience":0.007352358195930719},{"name":"cse","salience":0.006341095548123121},{"name":"error checking","salience":0.006181512959301472},{"name":"code","salience":0.005140693858265877},{"name":"thanks","salience":0.005134039558470249},{"name":"trim","salience":0.004033410456031561},{"name":"joe","salience":0.0030351346358656883}],"question":" Hi, The trim() function is currently breaking when I enter no text (i.e. no characters or a string of spaces) as the last value moves to an illegal array index, i.e. last = -1. I should mention that this only occurs when compiling with DCC. GCC does not pick this up. I should note that I'm running DCC locally rather than on the CSE machines due to the issue with the new C libraries breaking DCC. My question is, is this considered acceptable behaviour seeing as GCC allows it and I get the desired outcome? Or should I be editing the provided trim() function to check for this? Alternatively, should I be checking for this before the trim() function is called. Ideally I would like the trim function to deal with all of this. EDIT: I would like to keep using DCC as its error checking is really useful so I would ideally like to resolve this within the code. Thanks, Joe ","answers":[" This is a bug with trim(). You can fix the trim() function in your code to keep dcc quiet. That won't break auto-testing after you submit. ",[" Thank you. "]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"file","salience":0.4624730944633484},{"name":"file","salience":0.39669784903526306},{"name":"thanks","salience":0.08624030649662018},{"name":"history.c","salience":0.05458875000476837}],"question":" Hi, are we able to assume that the .mymysh_history file already exists? Or are we required to create the file in history.c if it does not yet exist. Thanks! ","answers":[" Consider the case where you're running mymysh on a brand new computer, for the first time . It wouldn't exist yet. So no, don't assume it already exists, and make checks to see if the file is there or not. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"error","salience":0.1889161765575409},{"name":"file","salience":0.10566437244415283},{"name":"mysh","salience":0.08879518508911133},{"name":"message","salience":0.07254098355770111},{"name":"bin","salience":0.06715385615825653},{"name":"cat","salience":0.05677574500441551},{"name":"directory","salience":0.0500231496989727},{"name":"directory","salience":0.04653050750494003},{"name":"xxx","salience":0.04626179486513138},{"name":"file","salience":0.04570654407143593},{"name":"xxx","salience":0.04570654407143593},{"name":"cat","salience":0.04570654407143593},{"name":"example","salience":0.04072650149464607},{"name":"directory bin","salience":0.032166555523872375},{"name":"other","salience":0.028296880424022675},{"name":"one","salience":0.0170634426176548},{"name":"something","salience":0.012076819315552711},{"name":"sense","salience":0.009888400323688984}],"question":" Hi, when I run mysh if there is error, the message will be like /bin/cat: xxx: No such file or directory but the example one will be cat: xxx: No such file or directory I think it makes sense since one of them is in the directory bin but the other not. should I do something to it or it's okay? ","answers":[" They're both in the directory /bin. One shell is displaying the complete command pathname; the other is not. Do whatever ~cs1521/bin/mymysh does "," For execve(args[0],args,envp) If args[0] is 'bin/cat' then you get the first For execve(command,args,envp) If command is 'bin/cat' And args[0] is 'cat' you get the latter. ",[" Okay, thank you! "]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"memory leaks","salience":0.32553306221961975},{"name":"sample solution","salience":0.28244757652282715},{"name":"memory leaks","salience":0.08044533431529999},{"name":"memory leaks","salience":0.07949458062648773},{"name":"assignment","salience":0.07922893762588501},{"name":"sample solution","salience":0.07376575469970703},{"name":"memory leaks","salience":0.03960974141955376},{"name":"assignment","salience":0.039475005120038986}],"question":" Memory leaks in sample solution I was wondering if we need to check memory leaks for our assignment, i tried to check the memory leaks of the sample solution, and spotted several, does it mean we actually don't need to check memory leaks for our assignment? ","answers":[" We will check for memory leaks (if it's easy), but just to make the point, not to dock marks. As Dylan says, you should not have memory leaks in your programs. Do what I say, not what I do. ",[" lol, roger that, my program doesn't have any leak though "]," I don't know if memory leaks will lower marks, but you should strive for none anyway. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"mymysh","salience":0.33395975828170776},{"name":"error","salience":0.1855800598859787},{"name":"outputs","salience":0.15028955042362213},{"name":"mysh","salience":0.09831617027521133},{"name":"part","salience":0.07559697329998016},{"name":"difference","salience":0.06867360323667526},{"name":"programs","salience":0.0472373403608799},{"name":"machines","salience":0.04034655541181564}],"question":" Hello, using the given mymysh I notice that I get different outputs when I run the programs: - using given mymysh - using my mysh Is this an error on my part that needs to be fixed, or is there just a difference, when run on different machines ? ","answers":[" is this on the cse server? "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"wonder","salience":0.590308666229248},{"name":"error message","salience":0.17624881863594055},{"name":"bin","salience":0.1663437932729721},{"name":"situations","salience":0.06709874421358109}],"question":" Hi, just wonder do we need to have exactly same error message as~cs1521/bin/mymysh? I think it's a bit hard to try all situations. ","answers":[" as much as possible yes. Anything else will cause auto tests to fail. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"file","salience":0.3541008532047272},{"name":"perror","salience":0.12615421414375305},{"name":"exec format error","salience":0.11963943392038345},{"name":"permissions","salience":0.09945390373468399},{"name":"sample prints","salience":0.0414062924683094},{"name":"perror","salience":0.037839822471141815},{"name":"executable","salience":0.03780563548207283},{"name":"type","salience":0.03325040638446808},{"name":"print statement","salience":0.026002034544944763},{"name":"execve failures","salience":0.022858550772070885},{"name":"perror","salience":0.019985685124993324},{"name":"255","salience":0.01972673088312149},{"name":"error","salience":0.018236784264445305},{"name":"ones","salience":0.016027238219976425},{"name":"elsewhere","salience":0.016027238219976425},{"name":"print statement","salience":0.011485177092254162}],"question":" If I try to run an empty file that has execute permissions, perror seems to print out \"Exec format error\", and 0 is returned. However the sample prints \"unknown type of executable\", and 255 is returned. Is this from perror or just from a print statement? If it's from a print statement, do we associate all execve failures with this error or only specific ones and use perror elsewhere? ","answers":[" That's from an explicit printf , which is followed by return(255) ",[" Thank you! I found it odd for it to print \"unknown type of executable\" even for permission denied errors, however I will follow the sample. "]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"shell","salience":0.23257069289684296},{"name":"commands","salience":0.1639537811279297},{"name":"commands","salience":0.1639537811279297},{"name":"commandhistory.","salience":0.0708782896399498},{"name":").commandline","salience":0.0708782896399498},{"name":"process","salience":0.038440171629190445},{"name":"reason","salience":0.03820851072669029},{"name":"pipelines","salience":0.0353287011384964},{"name":"findexecutable","salience":0.03111480362713337},{"name":"lack","salience":0.03108062967658043},{"name":"null","salience":0.027272850275039673},{"name":"pid = fork","salience":0.01727249100804329},{"name":"history","salience":0.013045457191765308},{"name":"shell","salience":0.013045457191765308},{"name":"history.c","salience":0.01051153615117073},{"name":"forks","salience":0.008339452557265759},{"name":"pipelines","salience":0.008339452557265759},{"name":"thanks","salience":0.007301049772650003},{"name":"functions","salience":0.004616151098161936},{"name":"statements","salience":0.004616151098161936},{"name":"loops","salience":0.004616151098161936},{"name":"history implementation","salience":0.004616151098161936}],"question":" If my shell is not reliably saving commands to \"CommandHistory.commands[i].commandLine\" (i.e. sometimes will leave them NULL), would a possible reason be due to lack of pipelines, forking etc? So far I've only used pid = fork(); for the process where I implement findExecutable - the rest of my shell built-in + command history implementation is just while loops + if statements together with functions I have written in history.c. Are they sufficient for the shell + command history, or do I need to implement forks/pipelines there too? Thanks ","answers":[" If my shell is not reliably saving commands to \"CommandHistory.commands[i].commandLine\" (i.e. sometimes will leave them NULL), would a possible reason be due to lack of pipelines, forking etc? Probably not. It sounds more like a problem with the way you're managing the memory in and around your CommandHistory object. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"shell","salience":0.2763192653656006},{"name":"command","salience":0.09739629924297333},{"name":"extroneous","salience":0.08568713814020157},{"name":"cat","salience":0.07803575694561005},{"name":"sample shell","salience":0.07202686369419098},{"name":"command","salience":0.06598049402236938},{"name":"process","salience":0.05861952528357506},{"name":"implementation","salience":0.0585218146443367},{"name":"cat","salience":0.05400107428431511},{"name":"b","salience":0.03985915333032608},{"name":"sample shell","salience":0.035273388028144836},{"name":"cat process","salience":0.03514507785439491},{"name":"cat","salience":0.02180851809680462},{"name":"error","salience":0.021325642243027687}],"question":" !!! I noticed in the shell !! will copy the previous command and any extroneous !s are added onto the previous command. In the sample shell it doesn't do this - which implementation is advised? i.e. if I enter cat, I run the cat process if I subsequently enter !!! do you want it so: a) we return an error (as cat! is not a valid process) OR b) we run cat as per the sample shell ?? ","answers":[" Mymysh isn't bash so don't model expectations off of it. For now go with running the last command as the example does, but that may be a bug. The correct outcome is probably to error as !! Is a valid inbuilts but !!! (Or any other lengthed string of !) isn't. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"cd ~/filename","salience":0.1976841241121292},{"name":"username","salience":0.1452665477991104},{"name":"filename","salience":0.13304875791072845},{"name":"cd","salience":0.13304875791072845},{"name":"lead","salience":0.08023635298013687},{"name":"destination","salience":0.08023635298013687},{"name":"path","salience":0.044044528156518936},{"name":"home","salience":0.04373454675078392},{"name":"home directory","salience":0.03476663678884506},{"name":"username","salience":0.027942581102252007},{"name":"home directory","salience":0.027779471129179},{"name":"user","salience":0.02384081482887268},{"name":"home","salience":0.016157058998942375},{"name":"getenv","salience":0.012213455513119698}],"question":" If I run \"cd ~/filename\" and \"cd ~username/filename\" will these lead to the same destination? From what I understand ~ represents the home directory, and the path can be obtained by using getenv(\"HOME\"). is this home the home directory for the user called username? ","answers":[" You can't CD to a file but: CD ~ will take you to your home directory CD ~username will take you to username's home directory, eg. ~cs1521 You can use glob to expand ~ check man 3 glob for the required flag. ",[" Does that mean that if username corresponds to your username then cd~ and cd~username will be the same, but if username is another user's username then it will go to their home directory? ",[" correct. "]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"message","salience":0.5896604657173157},{"name":"assignment","salience":0.07461581379175186},{"name":"matter","salience":0.056203726679086685},{"name":"ive","salience":0.053940705955028534},{"name":"weill %","salience":0.05171379819512367},{"name":"cam eup","salience":0.05110134184360504},{"name":"mymysh: /lib/i386","salience":0.036610789597034454},{"name":"version","salience":0.036105040460824966},{"name":"glibc_2.27","salience":0.021530576050281525},{"name":"libc.so.6","salience":0.009505915455520153},{"name":"gnu","salience":0.009505915455520153},{"name":"linux","salience":0.009505915455520153}],"question":" Out of nowhere this message comes out and ive been working on this assignment and this has never cam eup no matter how many testing ive done before weill % ./mymysh ./mymysh: /lib/i386-linux-gnu/libc.so.6: version `GLIBC_2.27' not found (required by ./mymysh) ","answers":[" On September 30th at 10:22pm, someone replaced the 2.27 version of glibc with the 2.26 version on all of the cse systems. You need to recompile all sections of your assignment with the 2.26 version of glibc (you need to make clean and then make) - after that you will be able to use your ./mymysh "," have you compiled your assignment? Make clean Make ",[" Yeh i have "],[" Same problem here when i ran the sample solution, it seems to be a system wide problem? ",[" yep error started from yesterday night "]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"error message","salience":0.15035970509052277},{"name":"import","salience":0.13444817066192627},{"name":"cs1521/bin/mymysh","salience":0.1324591189622879},{"name":"ravel","salience":0.09177765250205994},{"name":"version","salience":0.07521583139896393},{"name":"something","salience":0.05695534870028496},{"name":"libc.so.6","salience":0.048798441886901855},{"name":"gnu","salience":0.048798441886901855},{"name":"linux","salience":0.048798441886901855},{"name":"bin/mymysh: /lib/i386","salience":0.048798441886901855},{"name":"glibc_2.27","salience":0.0448177345097065},{"name":"bin/mymysh","salience":0.042183566838502884},{"name":"ravel","salience":0.02864152006804943},{"name":"import","salience":0.02864152006804943},{"name":"account","salience":0.019306054338812828}],"question":" I was trying to run ~cs1521/bin/mymysh, but I get some error message: /import/ravel/3/cs1521/bin/mymysh: /lib/i386-linux-gnu/libc.so.6: version `GLIBC_2.27' not found (required by /import/ravel/3/cs1521/bin/mymysh) Did I accidentally unlink something? Or did I just wreck my own account? ","answers":[" On September 30th at 10:22pm, someone replaced the 2.27 version of glibc with the 2.26 version on all of the cse systems. In order for people to use the sample solution now, the staff will need to recompile the reference solution with the older version of the software, or re-update back to version 2.27 of glibc "," All I can see is from https://askubuntu.com/questions/421642/libc-so-6-v... . You don't have a high enough version of libc6 , that is causing the error. From How to fix /lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.14' not found?  Super User : That means the program was compiled against glibc version 2.14, and it requires that version to run, but your system has an older version installed. You'll need to either recompile the program against the version of glibc that's on your system, or install a newer version of glibc (the \"libc6\" package in Debian). So, you just need to upgrade your libc6 package. All versions of Ubuntu have at least version 2.15 because it's a faily important package ( reference ). To upgrade it, use these commands in a terminal: sudo apt-get update sudo apt-get install libc6 ",[" But there appears no sudo command on CSE machine, if use without sudo, it shows permission denied. "]," I've same problem so it seems system wide. ",[" Thank god thought I broke something. I used ldd /bin/bash: linux-gate.so.1 (0xf7743000) libtinfo.so.5 =&gt; /lib/i386-linux-gnu/libtinfo.so.5 (0xf76fa000) libdl.so.2 =&gt; /lib/i386-linux-gnu/libdl.so.2 (0xf76f5000) libc.so.6 =&gt; /lib/i386-linux-gnu/libc.so.6 (0xf7521000) /lib/ld-linux.so.2 (0xf7744000) So the file exists. I'm checking online now ",[" any particular fix for this? still get the same issue "]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"functions","salience":0.24318693578243256},{"name":"history.c","salience":0.24318693578243256},{"name":"seqnum","salience":0.16715510189533234},{"name":"char","salience":0.09386671334505081},{"name":"example","salience":0.08165764808654785},{"name":"getcommandfromhistory","salience":0.06529771536588669},{"name":"char","salience":0.06529771536588669},{"name":"command","salience":0.040351249277591705}],"question":" Are we allowed to alter the functions in history.c? For example, instead of char *getCommandFromHistory(int seqNum), can we alter it to char *getCommandFromHistory(char *command) instead? ","answers":[" you can. But what exactly would you pass to your new function? ",[" Don't know if i'm doing this horribly wrong, but this function is for the ! SeqNo commands. So it takes \"!28\", for example, checks if there's a history entry with that sequence number and then returns the command line corresponding to that entry. Is there something I am missing? ",[" The ! Is the \"command\" and 28 is the \"argument\" you don't need to pass the ! Only the number. ",[" So would my function be valid I trimmed off the '!' command before passing it into the function? ",[" sure would. ",[" Great news! Thank you Dylan :D "]]]]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"error","salience":0.2577044665813446},{"name":"values","salience":0.23053480684757233},{"name":"sscanf","salience":0.11307971179485321},{"name":"fgets","salience":0.09505868703126907},{"name":"help","salience":0.09341142326593399},{"name":"error","salience":0.07480623573064804},{"name":"loop","salience":0.06526888906955719},{"name":"net","salience":0.06078352779150009},{"name":"commandline","salience":0.009352256543934345}],"question":" Error while sscanf'ing values into struct This sscanf is within a while(fgets)) loop, but I keep getting a runtime error and have been searching the net for a while now. Help would be appreciated ^__^ Could it be because I didn't malloc for commandLine? ","answers":[" its definitely because commandLine isn't malloced ",[" Thank you, also - I have gotten away so far with not mallocing for seqNumber. Is it recommended I do? ",[" seqNumber doesn't need to malloced because it's just an int. "]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "}],"question":" Is it okay to leave cleanCommandHistory empty as it doesn't need to be freed? ","answers":[" clearCommandHistory needs to be implemented. ",[" but what should i put in if the data structure i implemented doesn't need to be freed? ",[" the data structure will need to be freed as you are storing strings. ",[" but since u offered MAXSTR so it can be declare in fixed size as a global temporary variable, like this: typedef struct _history_entry { int seqNumber; char commandLine[MAXSTR]; } HistoryEntry; typedef struct _history_list { int nEntries; int end; HistoryEntry commands[MAXHIST]; } HistoryList; HistoryList CommandHistory; ",[" ok, in that case you don't need a clearCommandHistory. ",[" thanks! i'll just leave a comment then "]]]]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"way","salience":0.6935411095619202},{"name":"clearcommandhistory","salience":0.30645889043807983}],"question":" Hi, did we have to implement a way to directly call \"clearCommandHistory\"? ","answers":[" clear command history is only used to free the memory used by the history struct just before exit. ",[" So we didn't have toimplement a way for the user to clear the mymysh_history file? ",[" if the user wants to clear the file they can rm it. No call to clearCommandHistory can be made by the user. "]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"command","salience":0.3508594334125519},{"name":"parameter","salience":0.15868094563484192},{"name":"seqno","salience":0.14311158657073975},{"name":"execve","salience":0.10894775390625},{"name":"mymysh process","salience":0.07655662298202515},{"name":"execve","salience":0.03442875295877457},{"name":"hisarg","salience":0.024550599977374077},{"name":"hisarg","salience":0.022406533360481262},{"name":"mymysh","salience":0.02148575894534588},{"name":"way","salience":0.018158555030822754},{"name":"thanks","salience":0.009939785115420818},{"name":"advance","salience":0.009939785115420818},{"name":"hint","salience":0.009840555489063263},{"name":"function","salience":0.006264484021812677},{"name":"command","salience":0.0048288400284945965}],"question":" How to pass command to execve's second parameter? Hi, I'm trying to solve !SeqNo with execve, hisArg here is the corresponding history command. But execve seems only start another mymysh process, which doesn't take in hisArg as the command. So how could I let mymysh in the execve function run the command I specified (hisArg)? If this is not the way we handle !, may I have a hint about it? Thanks in advance!!! ","answers":[" The command you want to execve is hisArg[0] as that is the name of the program. Also there are two errors in the tokens line you need to fix. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"history entries","salience":0.6516774892807007},{"name":"thanks","salience":0.34832248091697693}],"question":" Hey. I was wondering whether it is 'ohkay' for my history entries to start from 0 instead of 1. thanks. ","answers":[" No "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"typo","salience":0.6482712626457214},{"name":"c","salience":0.2624427080154419},{"name":"assign2","salience":0.08928605169057846}],"question":" Hello, I think give cs1521 ass2 mymysh.c history.h history.c has a typo - from what I see it that should say assign2 ","answers":[" Yep should be give cs1521 assign2 mymysh.c history.h history.c "," Yes I just had the same thought this afternoon. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"assignment spec","salience":0.24886299669742584},{"name":"hi","salience":0.15608003735542297},{"name":"file","salience":0.1265159696340561},{"name":"case","salience":0.12429985404014587},{"name":"history","salience":0.10252872854471207},{"name":"filename","salience":0.08100366592407227},{"name":"home","salience":0.07021775841712952},{"name":"fopen","salience":0.06103373318910599},{"name":"file","salience":0.020951874554157257},{"name":"null","salience":0.008505381643772125}],"question":" File not saving Hi, the assignment spec says to save the history into a file $HOME/.mymysh_history, however, when I try to use ~./mymysh_history as the filename, fopen is returning NULL. I am not sure why this is the case. How should I be creating/saving the file? ","answers":[" You can't use \"~\" inside C programs. It is interpreted by the shell. You'll need to work out the full path name of the directory using the HOME environment variable. (It's in envp[ ] or you can read up on the getenv() library function). You can assume that this environment variable always has a value. ",[" Ahh I see, thank you I didn't know that. I tried to get the full path name and then append .mymysh_history onto it using strcat(strcpy(fileName, getenv(\"HOME\")), HISTFILE) but I was still receiving NULL which is why I resorted to trying to use ~. Am I using the function incorrectly? ",[" As long as fileName is malloced large enough that looks correct. ",[" I increased the size of my char buffer however it still doesn't seem to be working The print statement for the path prints: /import/glass/2/z5025097.mymysh_history and the \"Saved\" message doesn't print so I believe the file isn't being created. Any suggestions on what else might have gone wrong? ",[" The problem is that you haven't got a '/' between the path and the file. ",[" Thank you so much! "]]]]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"error message","salience":0.7382100820541382},{"name":"command","salience":0.20155809819698334},{"name":"exit","salience":0.060231804847717285}],"question":" What error message shall I print if the first command ever exit is a !! ","answers":[" Check the example, rm ~/.mymysh_history start 1521 mymysh and run !! As the first command. ",[" Shall I include the space in the ~/(space).mymysh_history ? ",[" I don't think I added a space, but no there shouldn't be a space. "]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"savecommandhistory","salience":0.3185555934906006},{"name":"showcommandhistory","salience":0.24293296039104462},{"name":"functions","salience":0.09301812946796417},{"name":"posts","salience":0.08973574638366699},{"name":"unintuitively","salience":0.047852907329797745},{"name":"function","salience":0.03872033208608627},{"name":"function","salience":0.017245454713702202},{"name":"skeleton program files","salience":0.011671600863337517},{"name":"confusion","salience":0.009427949786186218},{"name":"fd","salience":0.008944699540734291},{"name":"names","salience":0.008926032111048698},{"name":"function names","salience":0.00826303567737341},{"name":"posts","salience":0.008240430615842342},{"name":"output","salience":0.007911398075520992},{"name":"way","salience":0.007911398075520992},{"name":"reason","salience":0.0078816469758749},{"name":"assignment specs","salience":0.007239881902933121},{"name":"something","salience":0.0065352111123502254},{"name":"history","salience":0.0061986325308680534},{"name":"shell","salience":0.0061986325308680534},{"name":"exit","salience":0.0061986325308680534},{"name":"exit","salience":0.0061986325308680534},{"name":"functions","salience":0.005679043009877205},{"name":"understanding","salience":0.003805047133937478},{"name":"interaction","salience":0.003805047133937478},{"name":"operation","salience":0.003805047133937478},{"name":"thanks","salience":0.0037988033145666122},{"name":"history","salience":0.0034012235701084137},{"name":"shell","salience":0.002725594211369753},{"name":"file","salience":0.002393995877355337},{"name":"hand","salience":0.0023886305280029774},{"name":"times","salience":0.0023886305280029774}],"question":" I have been reading previous posts about the showCommandHistory and saveCommandHistory functions and am still somewhat confused. I know we can use these or write our own if we want but given they are in the skeleton program files I figure I should try and use them unless I come up with a reason why not to. Maybe my confusion is around their names. Unintuitively to me, the showCommandHistory function takes a FD to output/save to where the saveCommandHistory function does not though it seems to be it should the other way around based on the function names. Previous posts mention showCommandHistory should be called from saveCommandHistory but the assignment specs to me imply the saveCommandHistory function is only called on exiting the shell to write the history to file. showCommandHistory on the other hand could need to be called many times (when h/history is typed into the shell) before exit so calling it from saveCommandHistory on exit doesn't seem logical. Is there something I am missing with my understanding of these two functions as at the moment I am not any clearer on their interaction and operation. Thanks ","answers":[" SaveCommandHistory can save by showing the command history to a file instead of the stdout. ",[" Thanks Dylan, so it would seem to me that the prototype for SaveCommandHistory would need to be modified to receive input to indicate if it should save to file or call showCommandHistory and have it output to stdout. The original function it doesn't take an argument but I think that would need to change to work as describe. ",[" saveCommandHistory() always writes to ~/.mymysh_history, which is why it doesn't need an argument. showCommandHistory() sends the history list \"somewhere\" ... the somewhere has to be indicated via an argument. Maybe the name showCommandHistory() suggests that it's going to display it to the screen, but that's not the intention. Maybe the name writeCommandHistory() would have been better ... or not ... then you'd probably complain that it gave the impression that it was meant to go to a file ... ",[" \"then you'd probably complain\"? It was a question, not a complaint, and I think a valid one. ",[" Hi Simon, jas was just giving a catch 22 statement :P Basically, the showCommandHistory() function puts its output into the file pointer argument it was given "]]]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"kind","salience":0.6257181763648987},{"name":"file","salience":0.2064189463853836},{"name":"mode","salience":0.1678628921508789}],"question":" What kind of mode shall I open the redirecting file? 777 or 700 or 770 ","answers":[" definitely not 7, that adds the execution bit, and you'r making text files. The standard is 0644. ",[" so that creating a file is not the more permissions the better why cant I use 666 ",[" Look back on the lectures and tute for a full answer. 666 gives everyone on the system reading and writing permission on the file. 644 gives you read and write but everyone else read only. "]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"ls","salience":0.3510570228099823},{"name":"output","salience":0.22265180945396423},{"name":"newline","salience":0.08957691490650177},{"name":"entry","salience":0.08957691490650177},{"name":"call","salience":0.06191575154662132},{"name":"bunch","salience":0.061178065836429596},{"name":"execve","salience":0.061178065836429596},{"name":"escape sequences","salience":0.032777268439531326},{"name":"\\b","salience":0.02088930457830429},{"name":"lines","salience":0.009198884479701519}],"question":" Hi, should \"ls *\" output on a newline per entry (since I iterate through a bunch of execve's using globlist.gl_pathv, it does newlines every execve call). If not, what should I do to get rid of the lines, I tried printing \"\\b\" escape sequences but it wouldn't get rid of them... ","answers":[" ls * in mymysh should output exactly what it does in bash. ",[" How do you recommend I do this? I am using execve so I looked at appending flags to the exec value so that it would be one line (thinking of \"-c\") but since ls will print a \\n at the end whenever its executed (no flags to stop it) I am pretty much clueless as to how to stop execve printing a new line. ",[" You should never need to modify flags. ls prints one entry per line if it's output is not a tty. Are you using an output redirection on mymysh or on ls inside mymysh, if you are then what's happening is the correct behaviour. If you aren't using output redirections anywhere then look for incorrect calls to pipe(), if you have any, and dup2(). ",[" I am not using any output redirections yet, nor pipe() or dup2(). My code is basically replace the command with the wildcard with the globlist output one by one and execve each one (so obviously it is going to print a new line for each one as is the case for a normal execve). The only case I need to not newline is for when the command is ls (not -l) as for all other commands the output is the same as terminal's output. ",[" Execve is only called once. After a glob expansion all the results are passed to execve at the same time. "]]]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"cmdno","salience":0.4154838025569916},{"name":"initcommandhistory","salience":0.2990546226501465},{"name":"purpose","salience":0.09552649408578873},{"name":"variable","salience":0.09552649408578873},{"name":"int","salience":0.0471506267786026},{"name":"someone","salience":0.024526914581656456},{"name":"thanks","salience":0.022731054574251175}],"question":" cmdNo = initCommandHistory(); I am not quite sure about the purpose of cmdNo variable in main(). Which int Value the initCommandHistory() should return? And what is cmdNo used for? Can someone explain about it for me? Thanks ","answers":[" initCommandHistory() returns the smallest number greater than any previous history number. Eg. If you have a history file that has 12 commands numbered 1-12 then 13 will be returned. If you load a history file that has 20 commands numbered 46-65 then 66 will be returned. If no history file is found then 1 is returned. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"symbols","salience":0.4301430583000183},{"name":"sample","salience":0.23921073973178864},{"name":"tokens","salience":0.21510756015777588},{"name":"space","salience":0.11553864926099777}],"question":" Do we need to handle \" symbols? The sample seems to separate tokens on \" as well as space. ","answers":[" Dylan's right. Quotes are not treated specially. I'm sure I addressed this somewhere (maybe another comment thread, but I'm surprised it's not somewhere in the spec). ",[" The problem is that quotes are treated special, they are removed. Entering mymysh$ cat \"text file\" Will actually run cat text file "]," I believe the sample is incorrect. The spec doesn't note any special behavior for \" or ' So \" is handled like any other character. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"curiosity","salience":0.47710737586021423},{"name":"command","salience":0.11120355129241943},{"name":"cd","salience":0.11120355129241943},{"name":"commands","salience":0.07581134140491486},{"name":"cat","salience":0.06724698096513748},{"name":"mkdir","salience":0.06724698096513748},{"name":"bin folder","salience":0.06676624715328217},{"name":"bin","salience":0.02341395616531372}],"question":" Just asking out of curiosity. Why is 'cd' command not stored in bin folder unlike other commands eg. \"mkdir\",\"cat\" etc.?? Also \"cd -\" is not working in ~cs1521/bin/mymysh.I don't know if it's meant to be like that? ","answers":[" CD is a shell builtin. Every shell; bash, zsh, fish, mymysh, have there own way of storing environment variables and in particular the current working directory. Our shell is piggy backing off of unix standards and uses the default method of storing and interacting with the environment. Even if every shell stored and used the environment in the same way there are many other tasks shells have to perform when CD is called. globbing is only one way a path can be expanded, other ways like regev and custom matching schemes could be used br different shells, CD can have shortcuts: bash allows naming directors in a global scope for quick switching to regularly used directories, and many jump utility exist for custom path movement. In essence that's the real reason, customization. Path movement isn't a regulated thing and there are many schools of thaught about what's more efficient, so different shells are allowed to do it in different ways. Other utilities are very strictly regulated about how there task should be done, so it makes sense to have one program that does it exactly as defined. The only common thing for path traversing is that after all processing is done the result is stored in the unix environment under PWD. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"history.c","salience":0.6576114892959595},{"name":"function prototype","salience":0.34238848090171814}],"question":" For history.c, are we required to use every function prototype provided? ","answers":[" Function prototypes are provided to serve as a guide. Any function can be added removed or modified. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"commands","salience":0.3733474314212799},{"name":"options","salience":0.32375502586364746},{"name":"shell","salience":0.30289751291275024}],"question":" Do we need to implement options for the shell built-in commands? ","answers":[" Inbuilts should work as described in the spec. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"sample executable","salience":0.44351476430892944},{"name":"redirection","salience":0.3172246515750885},{"name":"command","salience":0.14316298067569733},{"name":"wildcards","salience":0.09609761089086533}],"question":" So I'm testing out the sample executable and I'm wondering if a command including wildcards and redirection should work? ","answers":[" Your example should work ok, and now does work in the reference binary. "," This is a bug with the example. This, and other commands like it, should be allowed. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"question","salience":0.36745598912239075},{"name":"histfile ``.mymysh_history","salience":0.3436426520347595},{"name":"showcommandhistory","salience":0.16606774926185608},{"name":"mymysh.c","salience":0.12283360958099365}],"question":" Sorry that this question might sound extremely stupid, but can we put #define HISTFILE \".mymysh_history\" on mymysh.c (or history.h) so that we can use it when we are using showCommandHistory(FILE*) on mymysh.c? ","answers":[" The define is only needed in history.c but you can move it if you want to. ",[" Wait, if that define is only needed in history.c, what's file pointer (FILE *outf) for on showCommandHistory? ",[" A call to ShowCommandHistory() can be used to do most of the work of saveCommandHistory() "]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"valgrind","salience":0.3452549874782562},{"name":"code","salience":0.18418757617473602},{"name":"bunch","salience":0.15646113455295563},{"name":"errors","salience":0.08444016426801682},{"name":"issue","salience":0.05802661553025246},{"name":"line numbers","salience":0.0550517737865448},{"name":"issue","salience":0.04013048857450485},{"name":"question marks","salience":0.02918621152639389},{"name":"something","salience":0.02561355009675026},{"name":"valgrind","salience":0.014377500861883163},{"name":"sample mymysh","salience":0.007270000874996185}],"question":" When I run my code with valgrind, I get a whole bunch of these errors. Instead of showing the line numbers where the issue occurs, it just provides three question marks. When I run the sample mymysh with valgrind, the same issue occurs. Is this something to worry about? ","answers":[" seems to be an ongoing issue with valgrind and dcc. Unfortunate you will have to debug without for now. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"commands","salience":0.3913021981716156},{"name":"mymysh","salience":0.23152895271778107},{"name":"result","salience":0.21589650213718414},{"name":"&gt","salience":0.08743748813867569},{"name":"cat","salience":0.0738348439335823}],"question":" Hey, I was trying commands on the given mymysh and I noticed the following result: Should cat *.s &gt; me.txt not work? ","answers":[" Already reported. It is a bug, and should be accepted. ",[" O right, Thank you "]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"part","salience":0.29892101883888245},{"name":"dot","salience":0.27245640754699707},{"name":"history","salience":0.13666824996471405},{"name":"home","salience":0.12071902304887772},{"name":"program","salience":0.07302200794219971},{"name":"file","salience":0.0312216654419899},{"name":"dot","salience":0.026257438585162163},{"name":"file name","salience":0.025367749854922295},{"name":"file","salience":0.015366445295512676}],"question":" For saving history part, we are asked to save the history in $HOME/.mymysh_history. I'm quite confused about the dot after '/'. What does that dot stand for? I made a small program trying to create a file without the dot and it works, and the file can't be created if the file name starting with a dot. ","answers":[" You might think it didn't work because it's hidden: run 'ls -A' to view hidden files as well. "," A dot file is a hidden file on a linux system. A file starting with a dot definitely can be created in c. ",[" Ok, that makes sense. Thank you very much! "]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"function prototypes","salience":1}],"question":" Are we allowed to modify the provided function prototypes? ","answers":[" There are no mandatory functions in the spec, go for it. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"error","salience":0.4533325731754303},{"name":"error handling","salience":0.21281936764717102},{"name":"error","salience":0.046643733978271484},{"name":"error","salience":0.04648160561919212},{"name":"file","salience":0.04124217480421066},{"name":"token","salience":0.028150655329227448},{"name":"elsewhere","salience":0.028150655329227448},{"name":"command-line","salience":0.028150655329227448},{"name":"&lt","salience":0.027809608727693558},{"name":"loop","salience":0.01944851502776146},{"name":"mymysh","salience":0.01944851502776146},{"name":"print message","salience":0.01939551904797554},{"name":"error message","salience":0.01532735489308834},{"name":"function","salience":0.01359905768185854}],"question":" Hi, I'm a bit confused about error handling. It says that, If the file does not exist, or is not readable, that is an error. Having &lt; as the last token, or elsewhere in the command-line is also an error. So if there is an error, should we just print the error message and continue the while loop or just stop the mymysh? If print message, what function should we use? perror? Thank you!! ","answers":[" Unless you encounter an unrecoverable error, like malloc running out of memory, you should continue the while loop, but print an message. You can only use perrot is a syscall fails, otherwise use fprintf. ",[" Why should we use fprintf? Can we just use printf? ",[" If you want to output to stderr then you need to use fprintf. It's not mandatory but in extream debugging cases it can help having errors separate. "]],[" Hi, I wonder if we can use perror. If not, why? ",[" perror reports an error if errno is set. Errno is set by a failed system call. A System call is anything in man 2. Read the man page of functions and if they say \"on error return -1 and set errno.\" Then you can use perror immediately after to report an error. Otherwise use fprintf. "]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"case","salience":0.5144491791725159},{"name":"anyone","salience":0.2277814745903015},{"name":"freaks","salience":0.15897822380065918},{"name":"everything","salience":0.09879111498594284}],"question":" Just in case anyone else freaks out, I think dcc might be segfaulting everything at the moment? ","answers":[" yes as well as valgrind. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"valgrind","salience":0.40877506136894226},{"name":"dcc","salience":0.14595381915569305},{"name":"dcc","salience":0.14595381915569305},{"name":"leak-check","salience":0.08868586272001266},{"name":"vlab","salience":0.08868586272001266},{"name":"printf","salience":0.04033426195383072},{"name":"hello\\n","salience":0.04033426195383072},{"name":"memory access","salience":0.021325906738638878},{"name":"valgrind","salience":0.019951138645410538}],"question":" Is the valgrind (as well as dcc and dcc --leak-check) in vlab broken? Now even when I try to printf(\"hello\\n\"). when I run valgrind ./hello it says some uninitialized memory access. ","answers":[" don't use valgrind and dcc together they do the same thing. Use dcc for run time checks then gcc and valgrind for a final profiling. ",[" But I still believe something wrong with valgrind, since when I run this simple program with gcc + valgrind the reaction is unbelievable. And now when I run all my previous programs with valgrind the same error message will occur "]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"pwd","salience":0.611985445022583},{"name":"cwd","salience":0.24134552478790283},{"name":"maxline","salience":0.14666903018951416}],"question":" for pwd, can we assume the cwd is MAXLINE (200 chars) long? ","answers":[" Read the man page on getcwd. It tells you about size. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"error","salience":0.7685604691505432},{"name":"error","salience":0.23143954575061798}],"question":" I've been stuck on this error when I compile. I'm not quite sure what the error is telling me. ","answers":[" You have included unistd.h in mymysh.c but using chdir in history.c so it needs to be included there too. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"errors","salience":0.41971978545188904},{"name":"i/o redirection","salience":0.17481522262096405},{"name":"stdout","salience":0.13733090460300446},{"name":"model solution","salience":0.12782157957553864},{"name":"command","salience":0.1197238489985466},{"name":"stdout","salience":0.020588673651218414}],"question":" Do the errors we create (such as \"Invalid i/o redirection\" and \"Command not found\") go to stdout or stderr? I believe the model solution sends them to stdout so that's what I've done, but I feel like they should go to stderr. ","answers":[" As long as the error is the same the output stream dosen't matter, stdout and steer can be merged later. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"code","salience":0.5845762491226196},{"name":"history","salience":0.15078550577163696},{"name":"file expansion","salience":0.10441896319389343},{"name":"count","salience":0.07430464029312134},{"name":"output","salience":0.05261529982089996},{"name":"code displays","salience":0.03329932317137718}],"question":" Hi this is about displaying the history of file expansion, my code displayed: The official code displays: Does this count as inconsistent output? ","answers":[" If the example saves the command as it was before globbing so should you. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"dir","salience":0.2623022794723511},{"name":"c files","salience":0.2623022794723511},{"name":"model solution shell","salience":0.12302585691213608},{"name":"behaviour","salience":0.09587119519710541},{"name":"i/o redirection","salience":0.08937828242778778},{"name":"mymysh","salience":0.07475175708532333},{"name":"model shell","salience":0.04218381643295288},{"name":"c","salience":0.03877350687980652},{"name":"bin","salience":0.011411035433411598}],"question":" In a dir with multiple .c files I execute the following with the model solution shell: mymysh$ wc *.c &gt; xyz Invalid i/o redirection Is this intended behaviour? Confused because the model shell doesn't complain about this: mymysh$ wc mymysh.c testhist.c &gt; xyz Running /usr/bin/wc ... -------------------- -------------------- Returns 0 ","answers":[" A glob pattern before a redirection is allowed. The model solution is incorrect. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"memory leaks","salience":1}],"question":" Do we get marked down if we got memory leaks? ","answers":[" Only if the reference mymysh has no memory leaks. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"error","salience":0.3063151240348816},{"name":"program return","salience":0.27774837613105774},{"name":"program return","salience":0.2560172379016876},{"name":"difference","salience":0.10097035765647888},{"name":"thanks","salience":0.058948926627635956}],"question":" Hi I also wonder if there is a error why sometimes the program return 1 and sometimes the program return 2. what is the difference between them? Thanks! ","answers":[" The printed return value should be returned by the executing process. What the actual values is changes depending on the program. ",[" Is the value get from wait()? But my program get different value to the ~cs1521/bin/mymysh one. it will have some value like 11 or 512 rather than 1 or 2 ",[" The spec tells you how to do this (WEXITSTATUS) ",[" Thank you very much and I have another question. For redirect files,If we have a pattern match (eg cat &lt; *.txt) As I was told before it should return an error message, but I have tried the ~cs1521/bin/mymysh it will not return an error but process it with the file file matched So should we print a error message or not. If so, what message should we print ",[" If *.txt expands to more than one file name, it should complain. ~cs1521/bin/mymysh is currently doing it wrong. It should be treated as if you had done cat &lt; a.txt b.txt The error message should be \"Invalid i/o redirection\" ",[" so will it(eg. cat&lt;*.txt) be recorded in history or not ",[" only valid commands are recorded. 'Cat &lt; *.txt' Is valid if it expands to only one file, and is invalid if it expands to multiple. "]]]]]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"autotest","salience":0.4038374722003937},{"name":"mistakes","salience":0.25986355543136597},{"name":"format","salience":0.1778886467218399},{"name":"space","salience":0.08957943320274353},{"name":"advance","salience":0.06883090734481812}],"question":" Hi, I wonder can we have some autotest to make sure we do not have silly mistakes including format(\\n,space...) Thank you in advance! ","answers":[" Once I've finished writing an assignment for my other course, I'll put up some testing stuff. However, but this stage, you ought to be able to do testing yourself ... E.g. write a sequence of shell commands in a file, then do something like: ./mymysh &lt; FileOfCommands &gt; out.obs~cs1521/bin/mymysh &lt; FileOfCommands &gt; out.expdiff out.obs out.exp After all, this is what we do for auto-testing. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"questions","salience":0.38596200942993164},{"name":"details","salience":0.156535804271698},{"name":"stage","salience":0.156535804271698},{"name":"redirection","salience":0.06301235407590866},{"name":"method","salience":0.05254054442048073},{"name":"difference","salience":0.04341927543282509},{"name":"i/o","salience":0.030847938731312752},{"name":"input case","salience":0.025383105501532555},{"name":"thanks","salience":0.025335298851132393},{"name":"advance","salience":0.025335298851132393},{"name":"command output","salience":0.01915471814572811},{"name":"mark","salience":0.015937844291329384}],"question":" Hello, two relatively generic questions this time (not asking for details at this stage). 1. Is the I/O redirection any different to the method covered here? https://webcms3.cse.unsw.edu.au/COMP1521/18s2/reso... 2. Seeing as though the command output is only worth 1 mark, is there really any major difference between that and the input case? Thanks in advance ","answers":[" Output redirection is very similar to input redirection, a more accurate marking guild would be 2 marks for either input or output redirection and an additional 1 mark for the other. There is a small difference as you are redirecting from a file to a process not from a process to another process. because of this you don't need pipe()s only dup2()s ",[" Cool, thanks Dylan. Although the spec seems to hint at pipe() (as well as dup2()) though. Was that bit extra or was it for something else? ",[" pipe is only needed for the challenge. ",[" So to clarify do you need to pipe at all or only for output redirection? Oliver. ",[" Pipe is not needed for in/output redirection. "]],[" Ah right. Thanks again for all the hard work answering these questions "]]]," Sorry also: 3. For our purposes, shell commands will never be I/O redirected right? ",[" Inbuilts like cd, history, and pwd will never be redirected. "]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"time","salience":0.19854728877544403},{"name":"home","salience":0.17208753526210785},{"name":"getenv","salience":0.13024187088012695},{"name":"history implementation working","salience":0.13024187088012695},{"name":"file","salience":0.06746429949998856},{"name":"code","salience":0.047648604959249496},{"name":"way","salience":0.046547628939151764},{"name":"path","salience":0.03307531028985977},{"name":"homedir","salience":0.02679269015789032},{"name":"command history file","salience":0.022417418658733368},{"name":"ravel","salience":0.02222994528710842},{"name":"import","salience":0.017404254525899887},{"name":"heck","salience":0.013780385255813599},{"name":"home environment","salience":0.011438913643360138},{"name":"file","salience":0.010714556090533733},{"name":"zxxxxxxx","salience":0.010305535048246384},{"name":"homedir","salience":0.008133997209370136},{"name":"code execution","salience":0.008012112230062485},{"name":"ravel","salience":0.007347105070948601},{"name":"history file","salience":0.006764872465282679},{"name":"import","salience":0.005745891481637955},{"name":"zxxxxxxx/.mymysh_history/","salience":0.0030579164158552885}],"question":" I think I've gotten my history implementation working, except that when I call getenv(\"HOME\") for a second time (eg to save to the mymysh_history file) it returns a different path to the first time I call it. I use the following code: and call it when opening and when saving the command history file. The first time I run this, homedir is \"/import/ravel/4/zXXXXXXX/\". The second time (when trying to write to history file), homedir is \"/import/ravel/4/zXXXXXXX/.mymysh_history/\". How the heck is that possible? It's almost as if the home environment is being modified during my code execution to become... a random file? Is there any way that could happen? ","answers":[" It's not a random file, that Is the history file. If you are modifying the return of getenv() in place then the next time getenv() is called your modification stays. ",[" So if I change the string that getenv gives to me, it'll change the HOME path too? ",[" Concatenate the history file name on a copy of the HOME env var. ",[" Is there a better way to do that than mallocing a string and strcpy(newString, getenv(\"HOME\"))? Also, when I try to \"cd\" to the HOME, I get a problem that my directory is set at the HOME for the rest of the shell run, regardless of me running \"cd SomewhereElse\". Would that be caused by the same issue of not using a copy of the getenv(\"HOME\") string? ",[" Is there a better way to do that than mallocing a string and strcpy(newString, getenv(\"HOME\"))? No. Why do you think that's not a good way to do it? Assuming you make the buffer big enough (which means malloc'ing strlen + enough to append the name of the history file. ",[" I'm still not used to C string manipulation, so everything looks messy and horrible, and I usually assume there's a better way to do it than I do it. "]]]],[" not quite. The memory location used as the return of getenv() is always the same. If you modify what's at that location you modify what you get back next time. "]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"infile &gt","salience":0.25226160883903503},{"name":"input","salience":0.18446096777915955},{"name":"feature","salience":0.16378666460514069},{"name":"redirection","salience":0.07382791489362717},{"name":"output","salience":0.07382791489362717},{"name":"input","salience":0.05036638677120209},{"name":"redirection","salience":0.05036638677120209},{"name":"output","salience":0.05036638677120209},{"name":"command","salience":0.04490296542644501},{"name":"spec","salience":0.01509506069123745},{"name":"problem","salience":0.013033980503678322},{"name":"thanks","salience":0.010531616397202015},{"name":"advance","salience":0.010531616397202015},{"name":"bash","salience":0.006640513427555561}],"question":" Extra feature: I've implemented both input and output redirection, however I've also handled the case of both input and output redirection in the same command, e.g wc &lt; infile &gt; outfile . This is how bash/dash etc behave, and more than the spec asks for, will that be a problem? Thanks in advance. ","answers":[" [deleted] ",[" No problem, thanks ",[" It will be a problem if one of our test cases checks for this and expects to see an error. Submit a version that precisely meets the spec. Anything beyond this is a private thing that you can use to impress your tutor. "]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"hi","salience":0.2650967240333557},{"name":"initcommandhistory","salience":0.22151976823806763},{"name":"sequence number","salience":0.2104739099740982},{"name":"command number","salience":0.11558686941862106},{"name":"thing","salience":0.10209333896636963},{"name":"difference","salience":0.05062451213598251},{"name":"thanks","salience":0.024529453366994858},{"name":"integer","salience":0.01007542759180069}],"question":" HI, is the sequence number and the command number the same thing? or whats the difference between them? Also, initcommandhistory returns an integer, what would it be? Thanks! ","answers":[" Yep, they're the same. InitCommandHistory() returns the first sequence number greater than any already used. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"extent","salience":0.44972553849220276},{"name":"advice","salience":0.2911275625228882},{"name":"testing filename expansion","salience":0.11929316073656082},{"name":"ls","salience":0.04592180624604225},{"name":"ls","salience":0.04219676926732063},{"name":"knowledge","salience":0.019721798598766327},{"name":"thanks","salience":0.019624369218945503},{"name":"sample solution","salience":0.012388980016112328}],"question":" Hello, Any advice on testing filename expansion? I know I can do cd ~, ls *.c and ls * on the sample solution but that's the extent of my knowledge. Thanks ","answers":[" have a look at 'man 7 glob' all the examples should work as you are using the glob() function. Also try ~/filename and ~username/filename. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"environment","salience":0.5997604727745056},{"name":"mymysh","salience":0.14970695972442627},{"name":"command line","salience":0.139492467045784},{"name":"thanks","salience":0.0517687052488327},{"name":"help","salience":0.03638977184891701},{"name":"error","salience":0.022881612181663513}],"question":" Hi, just wondering what should be the environment of ./mymysh and how should I type it in the command line? Because I am getting this error when trying to run: Thanks for any help! ","answers":[" What kind of machine are you running this on? ",[" My own laptop, Lenovo ThinkPad.. ",[" Running Windows? ",[" Yes, my laptop is win10. But running this on Vlab, Linux. ",[" Hmmm ... strange ... I just tested ~cs1521/bin/mymysh on Vlab (vx4) and it worked ok. Does ~cs1521/bin/mymysh work? What does the command echo $PATH show? ",[" Yes, ~cs1521/bin/mymysh works fine. echo $PATH shows: ",[" Did you change any variables before your code reached this point? (line 66) What did you change? And how did you change it? ",[" No, I don't think so. The only thing I did was to cat history.c mymysh.c &gt; exe.c and run gcc on exe.c, if this counts. Also I have tried to import \"history.c\" instead of \"history.h\", but I have changed it back to \"history.h\" when I ran the code. ",[" it's a dcc thing, gcc works fine. https://gist.github.com/Dylan-Brotherston/41acb999... "],[" Off topic, but you should run 'make' with c source code, catting was only for MIPS code. ",[" Oh! Didn't notice this. Thanks. "]],[" I am having this error as well, I am very sure i haven't changed anything, my code runs happily in Cygwin on windows but not in the VNC environment (i get the exact same error) the only change that I believe may be relevant is i changed the make file to make in dcc rather than gcc. ",[" I believe clang dosn't allows for *envp[] as a thired argument to main, dcc uses clang, so try using gcc instead. ",[" Ok cool thank you! "],[" it's a dcc thing, gcc works fine. https://gist.github.com/Dylan-Brotherston/41acb999... ",[" I tried gcc, and it shows this (cannot open file): The segmentation fault thing may be my own bug. But what about the \"No such file or directory\" thing? ",[" Also please use the makefile. "],[" probably coming from trying to open .mymysh_history incorrectly. ",[" Got it, thanks for your help. "]]]]]]]]]]]]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"error","salience":0.8072546124458313},{"name":"makefile","salience":0.1927453875541687}],"question":" Hi, I am getting this error when I submit, but it compiles fine using the makefile given ","answers":[" Which host did you run the give command on? ",[" It was on a cse machine but it seems to be working now when I submitted again "]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"mymysh_history file","salience":0.6136477589607239},{"name":"commands","salience":0.12547989189624786},{"name":"history","salience":0.11700769513845444},{"name":"function","salience":0.08929161727428436},{"name":"thanks","salience":0.0307612307369709},{"name":"showhistory","salience":0.02381180040538311}],"question":" Does our mymysh_history file have to only store the last 20 commands or can it store more (all history) and have the showHistory function only print the last 20? Thanks ","answers":[" Don't care. As long as it only holds the last 20 internally, I'm not fussed what's in the history file. ",[" Are we allowed to read from the mymysh_history to get the past commands (e.g. the last 17 from the last session) and store the current session commands (e.g. the 3 in the current session) in the buffer? The result of running \"history\" would still be the correct 20 commands. ",[" If there are less than 20 commands in the history file, load them up and start adding future commands to the HistoryList. If there are at least 20 commands in the history file, load the most recent 20 in the HistoryList and start replacing the oldest command each time you enter a new command. "]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"sample mymysh","salience":0.19196954369544983},{"name":"command line","salience":0.1265702098608017},{"name":"shell redirection","salience":0.1175777018070221},{"name":"files","salience":0.09416719526052475},{"name":"cat","salience":0.08622662723064423},{"name":"i/o redirection","salience":0.05999546870589256},{"name":"cat","salience":0.05965224280953407},{"name":"bash shell","salience":0.05894290283322334},{"name":"error","salience":0.048332590609788895},{"name":"command","salience":0.04692409560084343},{"name":"filename expansions","salience":0.03662063926458359},{"name":"specification","salience":0.03662063926458359},{"name":"redirection","salience":0.020194360986351967},{"name":"functionality","salience":0.01620578020811081}],"question":" Hi, using the sample mymysh is possible to do shell redirection with multiple files cat &lt; history.[ch] which works like the bash shell, but when a similar command is given cat &lt; history.c history.h the following error is returned Invalid i/o redirection Do we need to match this functionality or can we assume that redirection will not be tested with filename expansions as the specification states that the last command line should be a filename? ","answers":[" Only one file can be given to a redirect. If a glob pattern expands to more than one file then it should be an error. The mymysh example actually only works with the first file even if two are given from a glob. ",[" Thanks for the clarification Dylan! "]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"repost","salience":0.24991583824157715},{"name":"redirection","salience":0.17093729972839355},{"name":"file","salience":0.15700921416282654},{"name":"shell","salience":0.11825825273990631},{"name":"i/o","salience":0.10036180168390274},{"name":"thanks","salience":0.08276664465665817},{"name":"mymysh","salience":0.06845556944608688},{"name":"both","salience":0.05229535698890686}],"question":" Hello. I'm sure this has been asked already so sorry for potential repost; just can't find it. For I/O redirection, are we assuming that we're only ever reading/writing from one file, and never doing both at the same time as well? (The shell mymysh looked like it was doing that.) Thanks ","answers":[" correct, only one of &lt; or &gt; is allowed at a time. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"function","salience":0.4708661437034607},{"name":"showcommandhistory","salience":0.23856216669082642},{"name":"file","salience":0.16045890748500824},{"name":"history","salience":0.11279404163360596},{"name":"comment","salience":0.01731874607503414}],"question":" What should the showCommandHistory(file) function (in history,c) do? the comment above the function is not completed. ","answers":[" Print the contents if the history structure to the FILE* provided. ",[" I am using fprintf in my showcommand function. if that is the case, can i just call the showCommandHistory function inside the saveHistoryfunction? ",[" You can, yes. "]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"error","salience":0.49064546823501587},{"name":"clang","salience":0.1292489469051361},{"name":"command","salience":0.1292489469051361},{"name":"linker command","salience":0.09227918833494186},{"name":"ld","salience":0.04550235718488693},{"name":"error","salience":0.029570050537586212},{"name":"clang","salience":0.025181902572512627},{"name":"invocation","salience":0.016152454540133476},{"name":"exit code","salience":0.015013163909316063},{"name":"computer","salience":0.010534967295825481},{"name":"file","salience":0.00834878534078598},{"name":"mymysh","salience":0.008273769170045853}],"question":" clang: error: unable to execute command: Executable \"ld\" doesn't exist! clang: error: linker command failed with exit code 1 (use -v to see invocation) make: *** [mymysh] Error 1 I get this error when i want to submit it, but when i make the file on my own computer it compiles properly. What is this trying to say? ","answers":[" Nothing is wrong with your code. Just wait for the submission to be fixed. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"&lt","salience":0.5315465927124023},{"name":"file name","salience":0.46845343708992004}],"question":" Can we assume the \"&gt;\" or \"&lt;\" is not a valid file name? ","answers":[" You can, yes. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"inithistory","salience":0.5395779013633728},{"name":"function","salience":0.4024156332015991},{"name":"cmdno","salience":0.05800648033618927}],"question":" What does initHistory return? The function says it returns 'cmdNo', but what exactly is 'cmdNo' ","answers":[" Part of what initCommand reads are the sequence numbers for the commands. It returns the next sequence number (i.e. one more than the largest number in the history that it just read in). ",[" By the way, when initCommand is run, do the sequence numbers of the commands start back at 0? "],[" I see i see, thanks. "]," When you read the .mymysh_history file each command will have its number. Return the largest number+1 wa that is the number of the next command to be executed. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"entries","salience":0.28512638807296753},{"name":"nentries","salience":0.26242342591285706},{"name":"number","salience":0.10653293132781982},{"name":"entries","salience":0.07042838633060455},{"name":"buffer","salience":0.03519768267869949},{"name":"number","salience":0.02803058922290802},{"name":"buffer","salience":0.02413303777575493},{"name":"history","salience":0.02096135914325714},{"name":"question","salience":0.0208577960729599},{"name":"number","salience":0.019579390063881874},{"name":"entries","salience":0.019579390063881874},{"name":"file","salience":0.018238769844174385},{"name":"number","salience":0.013730224221944809},{"name":"commandhistory","salience":0.013070613145828247},{"name":"file","salience":0.012788045220077038},{"name":"commands","salience":0.011667689308524132},{"name":"entries","salience":0.010877520777285099},{"name":"thanks","salience":0.010216480121016502},{"name":"file","salience":0.010130302049219608},{"name":"beginning","salience":0.0064299870282411575}],"question":" Hey. Does 'nEntries' refer to the number of entries in the buffer that are not empty, or does it refer to the number of entries that have already been added to the history (even if they have been removed from the buffer). Follow up question, when initialising the CommandHistory, are we supposed to assume that there are 0 entries in the beginning (before reading the file), such that the number of entries after the file has been read in will the number of commands in the file. Thanks. ","answers":[" I used it as the number of entrys in the array. But you can use it however you like. InitHistory is the first thing done by the shell. So you can assume that there are no commands in history. ",[" Ahh thanks "]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"history","salience":0.2817665934562683},{"name":"catering","salience":0.2545109689235687},{"name":"reason","salience":0.1494748592376709},{"name":"command","salience":0.13764852285385132},{"name":"digit numbers","salience":0.10478159040212631},{"name":"thanks","salience":0.035908736288547516},{"name":"advance","salience":0.035908736288547516}],"question":" Hello, Is there some special catering we must do if for some reason our history goes past the 999th command (i.e. into 4 digit numbers)? Thanks in advance ","answers":[" No. Amway use the same format. I doubt that testing will go on long enough for this to matter. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"cat","salience":0.3577141761779785},{"name":"file","salience":0.29022419452667236},{"name":"fgets","salience":0.2019626796245575},{"name":"content","salience":0.15009893476963043}],"question":" Why doesnt .mymysh_history act like a proper file, i cant fscanf from it or fgets from it even though i cat it, i see theres content ive written on it ","answers":[" the .mymysh_history file needs to be in your home directory as given by the HOME environment variable, if the file is at $HOME/.mymysh_history it also needs to be opened with fopen(\"$HOME/.mymysh_history\", \"r\") BUT $HOME needs to be expanded into a path first. ",[" Where does $HOME come from? What is it? I assume it's some sort of absolute path to the current user's home file, but I don't remember it being covered yet. ",[" You can find it in the environment. ",[" I haven't seen week 9's lectures yet, are environment variables covered there, or somewhere else? ",[" Not sure. They were covered in week08 lab and tute. ",[" IIRC our tute mostly skimmed over them, since we could just pass in the envps we got from main. Is there another source of info for the 1521 course you know of that I could look through? ",[" not really sure, chech week07/08 lecture notes. And also the answers to the week08 tute. Also 'man getenv'. "]]]]]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"many","salience":0.4651621878147125},{"name":"cd variants","salience":0.1906060129404068},{"name":"some","salience":0.06945563852787018},{"name":"handles","salience":0.06459327042102814},{"name":"others","salience":0.05934207886457443},{"name":"cd","salience":0.055865440517663956},{"name":"username","salience":0.04487786069512367},{"name":"example","salience":0.03151138871908188},{"name":"oliver","salience":0.01858612895011902}],"question":" how many of these cd variants do we need to code? I know chdir handles .. for you but some of the others behave rather strangely, cd ~username and straight cd for example. Oliver. ","answers":[" Try them on the provided executable at '1521 mymysh' and see what works and what doesn't. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"&lt","salience":0.16795490682125092},{"name":"showcommandhistory","salience":0.13482393324375153},{"name":"comment","salience":0.07779721170663834},{"name":"post","salience":0.07233224809169769},{"name":"post","salience":0.0625428706407547},{"name":"top","salience":0.05502743273973465},{"name":"header&gt","salience":0.03423866629600525},{"name":"assignment","salience":0.03132997453212738},{"name":"savecommandhistory","salience":0.030666373670101166},{"name":"commandhistory","salience":0.02183052897453308},{"name":"john shepherd","salience":0.019726499915122986},{"name":"footer&gt","salience":0.018012426793575287},{"name":"factor","salience":0.015887746587395668},{"name":"footer&gt","salience":0.013582984916865826},{"name":"header&gt","salience":0.013503553345799446},{"name":"file","salience":0.013503553345799446},{"name":"purpose","salience":0.012056679464876652},{"name":"function","salience":0.011471228674054146},{"name":"file pointer","salience":0.01007765345275402},{"name":"rui tong","salience":0.009917723946273327},{"name":"file","salience":0.0090859429910779},{"name":"h command","salience":0.008809802122414112},{"name":"thanks","salience":0.008446665480732918},{"name":"history","salience":0.008373024873435497},{"name":"reply","salience":0.008311111479997635},{"name":"file","salience":0.008311111479997635},{"name":"command history","salience":0.0077389441430568695},{"name":"show function","salience":0.007675567176192999},{"name":"places","salience":0.0067789689637720585},{"name":"struct","salience":0.0067789689637720585},{"name":"everything","salience":0.006742354016751051},{"name":"program","salience":0.006723877042531967},{"name":"implementation","salience":0.006708817556500435},{"name":"understanding","salience":0.006389223039150238},{"name":"reply","salience":0.006263704504817724},{"name":"reply","salience":0.006263704504817724},{"name":"understanding","salience":0.005312705412507057},{"name":"history log","salience":0.005143091548234224},{"name":"thanks jas","salience":0.00489002512767911},{"name":"call","salience":0.004666450899094343},{"name":"footer&gt","salience":0.004574939608573914},{"name":"thanks","salience":0.004063652828335762},{"name":"thing","salience":0.003923369571566582},{"name":"way","salience":0.003919170703738928},{"name":"shell","salience":0.0037139221094548702},{"name":"shell","salience":0.0037139221094548702},{"name":"writing","salience":0.0032658244017511606},{"name":"header&gt","salience":0.0027464486192911863},{"name":"delete","salience":0.0023321867920458317},{"name":"hang","salience":0.002048312686383724}],"question":" Hello, I deleted a comment on an old post I made because I realised that it doesn't bump it back to the top, so I'm just making a new post. Original discussion: &lt;header&gt; Rui Tong 4 days ago , last modified 4 days ago &lt;/header&gt; I'm currently looking at the showCommandHistory function, and basically I gather that I'm reading from a file pointer (to the .mymysh_history file). Is there really any purpose for doing this? Because when I look at the assignment, I feel like it'd be much simpler to just store everything in the already defined global struct variable \"CommandHistory\", and then read from that instead for the show function. And then call saveCommandHistory before the program quits. Whereas from what I see, in this current implementation every time I want to add to my history, I need to always store it in CommandHistory, and then write it out to .mymysh_history. Which feels like I always need to write to 2 different places at once: the struct AND the file. Thanks. &lt;header&gt; John Shepherd 4 days ago , last modified 4 days ago &lt;/header&gt;showCommandHistory writes to the file handle.This allows you to double up using it interactively (for the h command) and to save the command history to the .mymysh_history fiile.&lt;footer&gt; Reply &lt;/footer&gt; &lt;header&gt; Rui Tong 4 days ago &lt;/header&gt;Hang on, sorry about this Jas but in that case what's the distinguishing factor between showCommandHistory and saveCommandHistory?&lt;footer&gt; Reply Edit Delete &lt;/footer&gt; &lt;header&gt; John Shepherd 4 days ago &lt;/header&gt;saveCommandHistory() could be implemented very easily using showCommandHistory()&lt;footer&gt; Reply &lt;/footer&gt; Deleted reply (sort of): Thanks Jas, Although I'm now wondering about this. From my understanding, I may have misinterpreted, but my understanding is that saveCommandHistory call s showCommandHistory to ensure that showCommandHistory does the writing for me. But if my shell wants to exit now, this is going to be problematic, because the last thing I want is for my shell to print out a history log right before it exits. Is there any way I can overcome this? Thanks ","answers":[" And to clarify any and all functions can be edited, added or removed. Its recommended to call ShowCommandHistory from saveCommandHistory but you don't need to. ",[" Ahh I see your point now. We can send it to stdout or send it to some FILE* we made in save. Thanks Dylan "]," ShowCommandHistory() only outputs to one place. The place given by the FILE* argument. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"cat","salience":0.39348262548446655},{"name":"txt command","salience":0.18333964049816132},{"name":"txt file","salience":0.1276811808347702},{"name":"first","salience":0.1276811808347702},{"name":"cs1521/bin/mymysh","salience":0.06684627383947372},{"name":"file","salience":0.04356509447097778},{"name":"redirect command","salience":0.030615516006946564},{"name":"lot","salience":0.0267885010689497}],"question":" Hi when I try cat &lt; *.txt command at ~cs1521/bin/mymysh I found that only the first matched txt file will be matched? Does that mean we only need to match the first file in the Redirect command? Thanks a lot! ","answers":[" Only one file can be redirected into or out of. cat &lt; *.txt should be an error as only one file is allowed. "," since it is really hard to let stdin/stdout to point to several file descriptors at same time. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"return 0/1","salience":0.18711914122104645},{"name":"cat","salience":0.07913631200790405},{"name":"cat","salience":0.07913631200790405},{"name":"file","salience":0.07149422913789749},{"name":"bin","salience":0.06375227123498917},{"name":"running","salience":0.06375227123498917},{"name":"situation","salience":0.06375227123498917},{"name":"error","salience":0.05827677622437477},{"name":"cat","salience":0.05386853963136673},{"name":"directory","salience":0.04981190338730812},{"name":"file","salience":0.04921314865350723},{"name":"directory","salience":0.04576621949672699},{"name":"xyz","salience":0.04331570491194725},{"name":"child process","salience":0.032536931335926056},{"name":"hints","salience":0.018663130700588226},{"name":"somewhere","salience":0.014609796926379204},{"name":"advance","salience":0.010201729834079742},{"name":"error message","salience":0.008249005302786827},{"name":"child process","salience":0.007344295736402273}],"question":" Hi, Since we need to print the \"Return 0/1\" at the end for this situation, mymysh$ cat xyz Running /bin/cat ... -------------------- cat: xyz: No such file or directory -------------------- Returns 1 Although it will print \"No such file or directory\", but it is not a error. So we can not get the error message from the child process. Can I get some hints of how I know the child process goes wrong somewhere so that I will know I should return 1 rather than 0? Thank you in advance! ","answers":[" Read man 2 wait. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"commands","salience":0.09988538175821304},{"name":"shell","salience":0.08212948590517044},{"name":"lecture","salience":0.07468564808368683},{"name":"assignment spec","salience":0.07379011809825897},{"name":"challenge","salience":0.07062700390815735},{"name":"command history","salience":0.043021976947784424},{"name":"commands","salience":0.04127492010593414},{"name":"jas","salience":0.036376845091581345},{"name":"history","salience":0.02939833700656891},{"name":"history","salience":0.029041340574622154},{"name":"history","salience":0.029041340574622154},{"name":"command","salience":0.026877116411924362},{"name":"difference","salience":0.02504788525402546},{"name":"record","salience":0.02504788525402546},{"name":"command sequence","salience":0.023406995460391045},{"name":"commands","salience":0.021845512092113495},{"name":"file","salience":0.019208600744605064},{"name":"someone","salience":0.01890067383646965},{"name":"command","salience":0.01881524734199047},{"name":"runs","salience":0.016880379989743233},{"name":"shell","salience":0.01588079333305359},{"name":"shell","salience":0.01588079333305359},{"name":"command history list","salience":0.015618438832461834},{"name":"command history file","salience":0.014998195692896843},{"name":"history","salience":0.014136203564703465},{"name":"history","salience":0.014136203564703465},{"name":"pipe","salience":0.014114923775196075},{"name":"commands","salience":0.013793518766760826},{"name":"requirement","salience":0.01336353924125433},{"name":"lecture","salience":0.01334627065807581},{"name":"requirement","salience":0.01334627065807581},{"name":"challenge component","salience":0.010907493531703949},{"name":"sequence","salience":0.010530972853302956},{"name":"h","salience":0.008202329277992249},{"name":"sequence","salience":0.006441361270844936}],"question":" Hi! How many commands do we record in the current shell instance history? The assignment spec says 20 but JAS said 50 in the lecture. Also, could someone explain to me the difference between the permanent record of command history and the instance history? Like, do we, on closing the shell, save the current temporary history into this permanent file then, when the shell next runs, use that history as the current instance history as well? Does the permanent command history file only hold 20/50 commands at a time? Also, if we start overwriting the oldest command in the temporary command history list, is the new command sequence 21/51? Or does it become 20/50 and all undeleted commands have their sequence reduced by 1, with the current sequence == 1 command being deleted? Finally for now, is pipe handling a challenge component, or a requirement? In the lecture it seemed to be phrased as a requirement, but the spec says it's a challenge. Edit: Are the commands \"h\" and \"history\" recorded in the history? ","answers":[" 20 commands are in history. There is a #defined constant in the history.c file that has the correct number. When the shell starts if a history file exists it is loaded into memory inside the shell. When the shell executes a correct command the command is added to the internal history if there are more than 20 in history the least recent command is removed from history. When the shell is shutdown the internal history is saved into the history file overwriting whatever is in there. Command history starts a 1 if there isn't a file to read. Then always increases by one for each command. 1,2,3,...,19,20,21,...,100,101,102,... Pipes are not required by the shell. Only input or output redirection. Always go by the spec. Above jas, above me, above supplied code. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"program","salience":0.5407736897468567},{"name":"redirects","salience":0.24727825820446014},{"name":"cmd","salience":0.08193951845169067},{"name":"example","salience":0.08096790313720703},{"name":"cmd","salience":0.04904060810804367}],"question":" Does the program need to handle multiple redirects? For example: Cmd &lt; cmd &gt; cmd Or can I assume that there will be 1 redirect? ","answers":[" If you try it on the provided executable '1521 mymysh' and you'll see that only one of &lt; or &gt; is accepted at a time. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"requirement","salience":0.6963152885437012},{"name":"format","salience":0.056407418102025986},{"name":"char","salience":0.056407418102025986},{"name":"return value","salience":0.04975567013025284},{"name":"char","salience":0.03848189115524292},{"name":"filenameexpand","salience":0.03389667347073555},{"name":"tokens","salience":0.03389667347073555},{"name":"format","salience":0.011203176341950893},{"name":"pattern match/glob case","salience":0.01062665693461895},{"name":"advance","salience":0.007978502660989761},{"name":"way","salience":0.005030614789575338}],"question":" Hi, I wonder if there is specific requirement of the format of the return value of the char **fileNameExpand(char **tokens) function? If not, will this function be individually test? how it will test? And can I not use this function if I can use other way to handle the pattern match/glob case? If so, what should be the format? Thank you in advance! ","answers":[" To my knowledge no functions will be individually tested. You can add as many functions as you want to either mymysh.c or history.c/.h ",[" And I can also not use some of the function which already added and need me to fill? For example, If I think i can implement my shell to expand all file names without using char **fileNameExpand(char **tokens) function, I can just not use it. As long as I can get the right output I can still get the mark for &lt;dl&gt; &lt;dt&gt; Expand filename wildcards (2 marks) part? I can delete that function which already written for me and want me to implement(with //TODO ) in the file that I submit? ",[" As long as your shell does it it doesn't matter how. "]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"command","salience":0.4117167294025421},{"name":"pattern match","salience":0.28226929903030396},{"name":"glob","salience":0.23955409228801727},{"name":"array","salience":0.06645987927913666}],"question":" Do we need to handle several pattern match by using glob() in one command? which means we need to have a array of glob_result[][] ?? ","answers":[" Yes. Multiple arguments might have to be globed. glob() returns a struct with a gl_pathv[][] for you. Read man 3 glob for info on the struct and how to glob multiple things. ",[" since if the pattern matched is one we can simply replaced, but if pattern matched greater than one, we need to have a loop. so, will we have 2 or more like *.txt in one command? that means we will have several gl_pathv[][] I am not to sure how to handle this case. ",[" You need multiple calls to glob() but only one glob_t steuct. Read the man page, it has info about calling glob() multiple times. ",[" But if I use append, all the path will be append in one struct, if I have 3 argv[](token) contains *, when I actually run the command, does that mean I need to have 3 loops to loop through all the command ",[" There is no problem with having all paths in one struct. "]]]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"interaction","salience":0.20767687261104584},{"name":"filename expansion","salience":0.19757570326328278},{"name":"redirection","salience":0.1754315048456192},{"name":"io","salience":0.1071210578083992},{"name":"hello &gt","salience":0.03862835094332695},{"name":"sample program","salience":0.03399679809808731},{"name":"txt","salience":0.0290402639657259},{"name":"txt","salience":0.028689369559288025},{"name":"txt","salience":0.028689369559288025},{"name":"txt","salience":0.025402730330824852},{"name":"filename expansion","salience":0.024228693917393684},{"name":"directory","salience":0.023037629202008247},{"name":"spec","salience":0.021306661888957024},{"name":"token","salience":0.01639455184340477},{"name":"error","salience":0.013891549780964851},{"name":"test1.txt test2.txt","salience":0.011888498440384865},{"name":"tokens","salience":0.00992308184504509},{"name":"command line","salience":0.0070773158222436905}],"question":" What is the interaction between filename expansion and IO redirection? Running echo hello &gt; *.txt in the sample program when test1.txt and test2.txt exist in the current directory writes hello to test1.txt and leaves test2.txt empty. This seems inconsistent with the spec, as after filename expansion, the tokens in the command line would be echo hello &gt; test1.txt test2.txt , so &gt; is not the 2nd last token and so this should instead be an error ","answers":[" File name expansion should not happen after &lt; or &gt;. Only one file can be given. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"something","salience":0.2401459664106369},{"name":"sample program","salience":0.2401459664106369},{"name":"c","salience":0.08134158700704575},{"name":"command","salience":0.06650649011135101},{"name":"press control","salience":0.06650649011135101},{"name":"reactions","salience":0.06571286916732788},{"name":"shell","salience":0.06338697671890259},{"name":"z","salience":0.061141420155763626},{"name":"gedit mymysh.c","salience":0.052331022918224335},{"name":"gedit mymysh.c &amp","salience":0.04036653786897659},{"name":"aonther text file","salience":0.022414660081267357}],"question":" I've noticed something with both the sample program and my own mymysh.c When I try to execute \"gedit mymysh.c\" sometimes the shell just have no reactions after executing the command unless press control (Z or C). But when I try to run \"gedit mymysh.c &amp;\" aonther text file '&amp;' will be created. How can I fix this? ","answers":[" Graphical programs won't be run under mymysh. There is a lot of hacks and tricks used to make them work. Now &amp; is a shell builtin like &gt; or &lt; As your shell doesn't do anything with this like bash does, it is simply passed to the called program. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"file","salience":0.45713505148887634},{"name":"function","salience":0.2440180778503418},{"name":"showcommandhistory","salience":0.0953834131360054},{"name":"outf","salience":0.061825066804885864},{"name":"outs","salience":0.04200488328933716},{"name":"content","salience":0.036575525999069214},{"name":"savecommandhistory","salience":0.023096852004528046},{"name":"advance","salience":0.02055324800312519},{"name":"functions","salience":0.019407859072089195}],"question":" Hi! I wonder for void showCommandHistory(FILE *outf) function, if the outs already open? And is what this function does quite similar to void saveCommandHistory Both these 2 functions do is to write the content to the file? Thank you in advance! ","answers":[" void saveCommandHistory() saves the contents of the history structure to the file $HOME/.mymysh_history. This can be done with a call to showCommandHistory void showCommandHistory(FILE *outf) prints the contents of the history structure to a specified file stream outf. ",[" So the file stream 'outf ' have already been opened before it is passed into the function? All I need is to write things to the function? And I do not need to close the file stream inside the function void showCommandHistory(FILE *outf) ? Thank you in advance! ",[" It needs to be opened before the function call, yes. ShowCommandHistory uses the file stream only. "]]," And the contents are the same? ",[" Yes "]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"ordering","salience":0.3194636404514313},{"name":"commands","salience":0.3055897653102875},{"name":"mymysh_history file","salience":0.11626046895980835},{"name":"ordering","salience":0.09900929033756256},{"name":"history","salience":0.08123257011175156},{"name":"commands","salience":0.041734497994184494},{"name":"reverse order","salience":0.024385778233408928},{"name":"format","salience":0.012323987670242786}],"question":" Does the ordering of the commands in the mymysh_history file have to exactly match the ordering when history is displayed? Although individual commands are stored in the same format as when displayed, they happen to be ordered in the reverse order. ","answers":[" The file should be in ascending order, the same as the history command. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"nentries","salience":0.5071567893028259},{"name":"initcommandhistory","salience":0.4015745222568512},{"name":"struct","salience":0.09126870334148407}],"question":" Hi! I also wonder what should be returned by int initCommandHistory() is that int nEntries inside the struct? ","answers":[" As I was told the other day, it returns nEntries + 1 , ie. the sequence number of the next command. Thats why its return value is assigned to the variable cmdNo in main(). "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"cd","salience":0.4702078402042389},{"name":"history","salience":0.1827942430973053},{"name":"order","salience":0.16259075701236725},{"name":"example","salience":0.03186453506350517},{"name":"history recording","salience":0.031481411308050156},{"name":"cd","salience":0.028424419462680817},{"name":"cat xxxxx","salience":0.021876178681850433},{"name":"ls","salience":0.02161164954304695},{"name":"cd","salience":0.021391484886407852},{"name":"thanks","salience":0.010554873384535313},{"name":"advance","salience":0.010554873384535313},{"name":"queue","salience":0.006647731643170118}],"question":" Will ! command change internal order of history? For example, if I have a history recording: 0, cd; 1, ls; 2, cat xxxxx; Then I used !1, which corresponds to 0, cd. Will cd enter the queue so that it looks like: 0,cd; 1, cd ... or keep consistent as before? Thanks in advance!!! ","answers":[" What does ~cs1521/bin/mymysh do? ",[" Sorry, didn't fully read the specification! :( "]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"problem","salience":0.7904234528541565},{"name":"ld","salience":0.09168856590986252},{"name":"executable","salience":0.05994129180908203},{"name":"code","salience":0.03402763232588768},{"name":"make","salience":0.023919040337204933}],"question":" I have a problem about give why when I run give, it says that Executable 'ld' doesn't exit? I can guarant my code could complie with make. ","answers":[" 'ld' is the program used to combine .o files in your submission by clang. This isn't a problem with your code. It will be fixed soon. ",[" Thanks. "]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"mode","salience":0.3179190456867218},{"name":"question","salience":0.28065553307533264},{"name":"path","salience":0.11562689393758774},{"name":"mode","salience":0.08976295590400696},{"name":"file","salience":0.040800102055072784},{"name":"redirection part","salience":0.0390862412750721},{"name":"assignment","salience":0.0390862412750721},{"name":"file","salience":0.030861932784318924},{"name":"everything","salience":0.02714558318257332},{"name":"lines","salience":0.01905546896159649}],"question":" I have a question about the mode of open(*path, MODE). In the redirection part of the assignment if I want to write to a file how can I guarant that I can overwrite everything in the file not just the first few lines ? ","answers":[" open is actually open(*path, flags, mode) read 'man 2 open' for the full list of flags, but the O_TRUNC is one of the flags you need. ",[" Thanks "]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"problem","salience":0.6087841391563416},{"name":"execve command","salience":0.2060525268316269},{"name":"command","salience":0.09507809579372406},{"name":"disk quota","salience":0.0635271668434143},{"name":"vlab","salience":0.026558078825473785}],"question":" I have a problem about the execve command. Why after I try to redirect a command I suddenly blow up the disk quota of Vlab. ","answers":[" What command? ",[" execve(ls) and redirect to hello ",[" and after that the folder occupy 60%of my total memory ",[" Any increase in ram should only last for the duration of the ls command, and it should only be a small increase. "]],[" if you don't close() after dup2() correctly then all output can start going to your file. ",[" can the fork blow up memory? I only fork before the actull exe ",[" a fork-bomb can blow up memory, but that requires each forked process to also call fork(). ",[" Yes, I've just fixed the bug which is a fork bomb this morning. But how can I reduce the memory? Currently there's only 1.6 MB in that folder. But the quota is still reach the limit. ",[" memory(ram) or storage(disk)? ",[" I ve already clean up the file during help sessions.thankyou "]]]],[" a fork() will at most double the memory(ram) used. after the exec then you have the memory of that new process instead of a second copy of your own program. "]]]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"function","salience":0.25065258145332336},{"name":"showcommandhistory","salience":0.15122027695178986},{"name":"file","salience":0.107062429189682},{"name":"commandhistory","salience":0.09325272589921951},{"name":"assignment","salience":0.08726872503757477},{"name":"file pointer","salience":0.08612209558486938},{"name":"purpose","salience":0.05003294721245766},{"name":"show function","salience":0.029632557183504105},{"name":"everything","salience":0.028374744579195976},{"name":"program","salience":0.025951391085982323},{"name":"file","salience":0.017022060230374336},{"name":"savecommandhistory","salience":0.015362877398729324},{"name":"places","salience":0.013642716221511364},{"name":"struct","salience":0.013642716221511364},{"name":"thanks","salience":0.01361690741032362},{"name":"history","salience":0.008571124635636806},{"name":"implementation","salience":0.008571124635636806}],"question":" I'm currently looking at the showCommandHistory function, and basically I gather that I'm reading from a file pointer (to the .mymysh_history file). Is there really any purpose for doing this? Because when I look at the assignment, I feel like it'd be much simpler to just store everything in the already defined global struct variable \"CommandHistory\", and then read from that instead for the show function. And then call saveCommandHistory before the program quits. Whereas from what I see, in this current implementation every time I want to add to my history, I need to always store it in CommandHistory, and then write it out to .mymysh_history. Which feels like I always need to write to 2 different places at once: the struct AND the file. Thanks. ","answers":[" showCommandHistory writes to the file handle. This allows you to double up using it interactively (for the h command) and to save the command history to the .mymysh_history fiile. ",[" Hang on, sorry about this Jas but in that case what's the distinguishing factor between showCommandHistory and saveCommandHistory? ",[" saveCommandHistory() could be implemented very easily using showCommandHistory() "]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"history file","salience":0.3648360073566437},{"name":"home","salience":0.2234988808631897},{"name":"history","salience":0.11617693305015564},{"name":"home","salience":0.10235413908958435},{"name":"error","salience":0.07660835236310959},{"name":"file","salience":0.06199124827980995},{"name":"director","salience":0.054534412920475006}],"question":" how can I create the history file in the HOME. Currently when I try open or fopen (HOME/.history) will always fail and error says no such file or director ","answers":[" $HOME is an environment variable that needs to be expanded, either with getenv() or by a search of *envp[]. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"mistake","salience":0.19926635921001434},{"name":"redirection command","salience":0.1894250065088272},{"name":"sample program","salience":0.16790451109409332},{"name":"file","salience":0.1256953477859497},{"name":"cat","salience":0.03658156469464302},{"name":"error","salience":0.03219248726963997},{"name":"cat","salience":0.02478252723813057},{"name":"definition","salience":0.022058485075831413},{"name":"assignment","salience":0.022058485075831413},{"name":"token","salience":0.022058485075831413},{"name":"directory","salience":0.02179078385233879},{"name":"elsewhere","salience":0.020250897854566574},{"name":"command-line","salience":0.020250897854566574},{"name":"case","salience":0.01761528290808201},{"name":"error","salience":0.016985075548291206},{"name":"file name","salience":0.015209457837045193},{"name":"output","salience":0.012812578119337559},{"name":"error","salience":0.012353339232504368},{"name":"try_2 &gt","salience":0.009006732143461704},{"name":"argument","salience":0.007747869472950697},{"name":"&lt","salience":0.003953829873353243}],"question":" Is there a small mistake in the redirection command of the sample program? When I run : cat &lt; try_2 try_3 (the two file are in my own directory) it actully cat try_2 However according to the definition of the assignment: Having &lt; as the last token, or elsewhere in the command-line is also an error. This case should produce an error not directly taking the argument next to &lt; as the file name Also like : wc -l try_2 &gt; try_3 try_4 try_5 the output is in the try_3 but not an error. ","answers":[" Fixed. New mymysh installed. "," Correct. Only one file name is allowed. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"history file","salience":0.5777342319488525},{"name":"farmat","salience":0.20389215648174286},{"name":"cat command","salience":0.14147135615348816},{"name":"stdout","salience":0.052074678242206573},{"name":"program","salience":0.024827610701322556}],"question":" For the history file, when I run the cat command on it shall it be exactly the same farmat as the one I print in the stdout? Or I could update it only when the program actually finishes. ","answers":[" the .mymyh_history file is updated by saveCommandHistory(), and that is only called right at the end. ",[" So when I cat the mymyh_history file shall it be the same format as the history in the stdout? ",[" If you are in mymysh and you cat the file it should look like it did before you started your session. only after you type \"exit\" will the file be updated. But the format is the same yes. \"%3d%s\\n\" . ",[" So can I assume that it is only updated when someone press exit? For example when I press control C and terminate the process the records in the history_list will just disappear? ",[" only \"exit\" and ^D will update history. if mymysh is terminated with ^C then the history file stays as if the current session didn't happen. "]]]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"questions","salience":0.43249934911727905},{"name":"redirect command","salience":0.09477332979440689},{"name":"filename","salience":0.06756790727376938},{"name":"token","salience":0.06594923883676529},{"name":"input command","salience":0.06483464688062668},{"name":"token","salience":0.061017751693725586},{"name":"cases","salience":0.040918003767728806},{"name":"&gt","salience":0.03968800604343414},{"name":"&lt","salience":0.03226733207702637},{"name":"pairs","salience":0.02871021442115307},{"name":"&lt","salience":0.02871021442115307},{"name":"redirect","salience":0.022480323910713196},{"name":"filename","salience":0.020583678036928177}],"question":" I have 2 questions about redirect. Can I assume that the redirect command always have the last 2 token as &gt; and a filename ? And reditrct input command always have the first 2 token as &lt; and a filename? And for the redirect do we need to consider cases with mumltiple pairs of &lt; &gt; ? ","answers":[" no, you could just get a command then a \"&gt;\" with no filename. the last two tokens are either \"&lt; filename\" or \"&gt; filename\" both input and output redirection is not allowed. ",[" Should input be the first two token ? And should this type of command needed to be consider? inputfile &lt; ./sort &gt; outputfile. And what is the meaning of getting a command then \"&gt;\"with no filename? ",[" see my other post. input or output redirection is always after the command. &gt; with no filename is an error. "]],[" There are 3 possible correct formats for a input line. COMMAND [ARG...] COMMAND [ARG...] &lt; FILENAME COMMAND [ARG...] &gt; FILENAME where [ARG...] means optionally one or more arguments. only #1 is correct for inbuilts. everything else is incorrect in some way. ",[" Yeah, thanks, so this shell is different from the one in Vlab, even if redirect input we need to put &lt; file name at the back. ",[" What shell on Vlab? All shells i know of need redirects after commands. ",[" Oh I made a mistake but will this kind of command considered for this assignment? like the command used in 2521 lab time sort -n &lt; /tmp/nums &gt; /dev/null ",[" As i said, only one redirect will be used either \"&lt; /tmp/nums\" or \"&gt; /dev/null\" but not both. ",[" Thanks so much "]]]]]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"reference program","salience":0.6406137347221375},{"name":"exec","salience":0.14822694659233093},{"name":"status codes","salience":0.10800299793481827},{"name":"file","salience":0.10315632820129395}],"question":" Reference program is returning two status codes `exec` is an empty executable file ","answers":[" Hi Andrew, the sample program has been fixed: mymysh$ ./testRunning ./test ...--------------------./test: unknown type of executable--------------------Returns 255mymysh$ exit bash$ "," the return code from an empty program should be 0, not 255. Looks like Jas isn't killing a forked process correctly so there are two returns. There should of course only be one return printed. ",[" Hm, it looks like a bash thing actually. Tried it in zsh and I get the error code 126. Bash is probably running the file as a bash script ",[" and that's just a zsh thing. per POSIX there is no defined behaviour when an empty file is executed. bash just \"runs\" it as a script and zsh errors out with a 'file was not executable' it's undefined behaviour, as Jas is returning 255 you should do the same. ",[" the same is true for any non shebanged script file, Jas's implementation will break, you should not break and return 255. for now. Jas may have an update once he fixes the problems. "]]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"filename expansion","salience":0.7117705941200256},{"name":"character","salience":0.12867476046085358},{"name":"middle","salience":0.05969736725091934},{"name":"example","salience":0.045126523822546005},{"name":"hello","salience":0.03181513026356697},{"name":"file expansion","salience":0.02291565015912056}],"question":" When shall a filename expansion happen for a ~ character? Can the ~ be used as the middle of a file expansion? for example ls -l hello~cs1521 ? ","answers":[" ~ must always be the first char in a path. ",[" So in this case I can just glob and move on ? ",[" yep. That is as long as you check globs return for errors. ",[" So in what case involves * shall I remove some part of the path name? I'm getting really confused. For example if I do wc -l ~zid/cs1521/week07/*.c the actull command saves the path name But when I do wc -l *.c the output removes the path name ",[" Sorry Yifan, i don't follow. ",[" It is like for the same directory wc -l ~zid/cs1521/week07/*.c the correct output will be home/zid/cs1521/week07/a.c home/zid/cs1521/week07/b.c etc. But if I'm in the directory and do wc -l *.c the output would be a.c b.c So my question is in what case the path name obtained by glob should be removed? ",[" for : ~zid/cs1521/week07/*.c First glob resolves the ~. then every file in home/zid/cs1521/week07/ that matches \"*.c\" is found and the full path is return as the full path is given. for: *.c Every file in the current directory, as found by getcwd(), that match \"*.c\" is found and the relative path from the current directory is returned. you can then get the current path from getcwd(), or from PWD in envp. and strcat each result onto a copy of it. ",[" Then can I assume that home is the largest directory? Every other directory comes from home? ",[" \"/\" is the root directory. every absolute path starts with \"/\" a relative path starts with anything else. ",[" Thanks, I finally understand. "]]]]]]]]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"error messages","salience":0.7678642868995667},{"name":"stdout","salience":0.23213572800159454}],"question":" Should error messages be sent to stderr or stdout ","answers":[" Unless specified it doesn't really matter. debugging and logging can be easier if errors go to a different place than normal output. but in this case it's is entirely up to you. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"command","salience":0.25347793102264404},{"name":"error message","salience":0.2507835626602173},{"name":"cage","salience":0.08848448842763901},{"name":"export","salience":0.07566118240356445},{"name":"cage","salience":0.060576535761356354},{"name":"perror","salience":0.052305493503808975},{"name":"tmp_amd","salience":0.04543270543217659},{"name":"cage","salience":0.027453865855932236},{"name":"cage","salience":0.027453865855932236},{"name":"export","salience":0.023361369967460632},{"name":"file","salience":0.017651138827204704},{"name":"directory","salience":0.017651138827204704},{"name":"wc","salience":0.013326767832040787},{"name":"file","salience":0.012383501045405865},{"name":"directory","salience":0.012383501045405865},{"name":"perror","salience":0.012383501045405865},{"name":"wc","salience":0.009229430928826332}],"question":" When a command fails and needs to print an error message how to remove the \" /tmp_amd/cage/export/cage/2/z5173587/cs1521/assign2/\" in perror? I mean instead of showing wc: /tmp_amd/cage/export/cage/2/z5173587/cs1521/assign2/~c: No such file or directory how can I just show wc: ~c: No such file or directory with perror ? ","answers":[" Dylan is right in his comments about perror. I assume that this output is coming from your attempt at mymysh , and not the reference solution. Did you use glob() to do the expansion? I just tested this command on the reference solution and got: :jas@williams: ~cs1521/bin/mymysh mymysh$ wc ~c Running /usr/bin/wc ... -------------------- wc: ~c: No such file or directory -------------------- Returns 1 mymysh$ which is what I would have expected. ",[" The only difference is that instead of printing wc: ~c: No such file or directory my out put is after the call to execve function wc: /tmp_amd/cage/export/cage/2/z5173587/cs1521/assign2//~c: No such file or directory ",[" It appears that you are just appending \"~c\" onto the end of the current path, or just giving \"~c\" to wc. Jas mentioned the glob function. The file path needs to be parsed by the glob() function in order for special chars like ~ to be expanded. EDIT: let me rephrase. i assume you are entering something like this mymysh$ wc ~c and you then tokenise this line into [\"wc\", \"~c\"]. at the moment it looks like you are just calling execve(\"wc\", [\"wc\", \"~c\"], envp) now \"~c\" has no special meaning to wc so wc is just appending \"~c\" onto the end of the current path, the current path is PWD in envp. and is \"/tmp_amd/cage/export/cage/2/z5173587/cs1521/assign2/\" this is where the error comes from. To get this working properly, \"~c\" needs to be transformed into an absolute path so that wc does't append it to PWD. to do this use the glob() function. then pass the globed path as the second argument like so: execve(\"wc\", [\"wc\",\"/home/username/c\"], envp) where \"/home/username/c\" was returned from glob(\"~c\"). ",[" Do you mean that not only the args, the path must also be expanded? ",[" see my edit. ",[" [deleted] ",[" Hi Yifan, that's a bit to much code for the forum, please, delete that and send me an email. "]]]]]]," perror is only used when a system call fails, ie. something found in man 2. perror then generates an error message based on errno. for other errors, like not finding a command, use fprintf to stderr. if you are running wc and wc is producing: \"wc: /tmp_amd/cage/export/cage/2/z5173587/cs1521/assign2/~c: No such file or directory\" Then that means that wc is getting: \"/tmp_amd/cage/export/cage/2/z5173587/cs1521/assign2/~c\" as its second argument. ",[" I understand that wc is getting \"/tmp_amd/cage/export/cage/2/z5173587/cs1521/assign2/~c\" as the second argument, however, currently the file pass of execve(*file, **arg, **envp) should be the one above. Is it possible to let the eveve print a different error message? Like something begin with wc: ~c..... "]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "}],"question":" what is .mymysh_history???? ","answers":[" A file in the home directory of the current user of mymysh that: is read on startup of mymysh is created on exit of mymysh holds the current users command history of mymysh "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"sample output","salience":0.6270624399185181},{"name":"command","salience":0.09738539159297943},{"name":"output","salience":0.09034384042024612},{"name":"sense","salience":0.0632348358631134},{"name":"point","salience":0.055064331740140915},{"name":"user","salience":0.03569820895791054},{"name":"feedback","salience":0.03121095709502697}],"question":" In the sample output, after `h` is executed, it would be added as !31, and !11 will be discarded. Shouldn't it make more sense to output !12 - !31, so the user doesn't even get visual feedback about !11? (No point in knowing that command if you can't use it) ","answers":[" mymysh executes commands before they are added to the history, because only valid commands are added. This has the side effect that showing history shows the history as it was before the current command. ",[" Could it be implemented differently? Thanks! ",[" It could have been, but this aspect won't be changing. mymysh is not bash and doesn't need to behave exactly like bash . "]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"history substitution","salience":1}],"question":" History substitution Is this valid? ","answers":[" It probably shouldn't be. You can implement it however you like. We won't include it in our testing. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"strings","salience":0.2979191541671753},{"name":"string size","salience":0.16655109822750092},{"name":"struct","salience":0.16655109822750092},{"name":"maxstr","salience":0.14667020738124847},{"name":"file","salience":0.07589274644851685},{"name":"same","salience":0.049396660178899765},{"name":"run","salience":0.04015703126788139},{"name":"string","salience":0.031621575355529785},{"name":"address","salience":0.025240451097488403}],"question":" Do we have to malloc for the strings or just put the MAXSTR as string size in the struct? Since it is very difficult to read from the file when the string is dynamically allocated. The address cannot be guaranteed to be the same for each run. ","answers":[" Dynamic allocation is only relevant while the shell is running. You should be writing the *string*, not a pointer to the string, into the history file. ",[" So you mean that malloc is not necessary in the history.c ? ",[" No. That's not what I meant. ",[" But when write(fd, &amp;current_history, sizeof(HistoryEntry)) the one written to the file is always a pointer, how can I instead writting the string? ",[" Open the history file using fopen(), rather than open(), and then use fprintf() to write stuff into it. "]]]]]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"communication","salience":1}],"question":" communication? ","answers":[" communication. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"error messages","salience":0.4691682457923889},{"name":"sample program","salience":0.4156970977783203},{"name":"error messages","salience":0.11513464152812958}],"question":" Should we be using the same error messages provided in the sample program? Or will it be fine if we type our own error messages? ","answers":[" Use the same messages. Including the same spacing and upper/lower-case characters. You can use your own error messages if you don't care about failing auto-testing. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"return value","salience":0.4461615979671478},{"name":"sub-processes","salience":0.1295217126607895},{"name":"cat xyz","salience":0.11788468807935715},{"name":"wstatus","salience":0.06346575915813446},{"name":"file xyz","salience":0.04552011936903},{"name":"command","salience":0.04360399395227432},{"name":"wait","salience":0.04307757690548897},{"name":"wexitstatus","salience":0.03969096019864082},{"name":"output","salience":0.03441394865512848},{"name":"values","salience":0.02403753064572811},{"name":"sample output","salience":0.012622116133570671}],"question":" How should we get the return value from sub-processes? I used WEXITSTATUS on the wstatus given by wait, but this gave 1 for the command \"cat xyz\" (where the file xyz doesn't exist) whereas the sample output and sample executable both show 256 as the output. Should I multiply all return values by 256? ","answers":[" I didn't use WEXITSTATUS ... but I think I should have ... I'll change the executable and the spec to reflect this. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"initcommandhistory","salience":0.615216851234436},{"name":"number","salience":0.2183334082365036},{"name":"history entries","salience":0.16644974052906036}],"question":" What should initCommandHistory() return? The number of history entries? ","answers":[" The first history number to use, ie if you run ./mymysh and run 5 commands, then close mymysh, the next time it is run the history numbers start at 6, so initCommandHistory() returns 6. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"commands","salience":0.270967960357666},{"name":"history","salience":0.22749720513820648},{"name":"number","salience":0.19807104766368866},{"name":"command","salience":0.19691993296146393},{"name":"command numbers","salience":0.10654386878013611}],"question":" Once there are 20 commands in history is the most recent command always number 20, or do the command numbers keep rising forever? ","answers":[" The history number is always increasing. But only the last 20 need to be remembered. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"cd","salience":0.3163256049156189},{"name":"directories","salience":0.233721524477005},{"name":"command","salience":0.22077687084674835},{"name":"account","salience":0.1579110026359558},{"name":"spaces","salience":0.07126498222351074}],"question":" For the `cd` command, should we take directories with spaces into account? ","answers":[" No, spaces are only used as argument seperators. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"home","salience":0.3851613402366638},{"name":"format","salience":0.3055741786956787},{"name":"sample executable","salience":0.24970337748527527},{"name":"format","salience":0.05956112593412399}],"question":" Do we need to save the $HOME/.mymysh_history in the same format as the sample executable? Or are we allowed to make up our own format? ","answers":[" Same format. The only \"format\" that you're allowed to fiddle with is the internal format of the history list. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"built-ins","salience":0.6456946730613708},{"name":"example","salience":0.12472531199455261},{"name":"command","salience":0.07930409163236618},{"name":"history.txt","salience":0.05153689533472061},{"name":"redirection","salience":0.042101554572582245},{"name":"built-ins","salience":0.030138056725263596},{"name":"shell","salience":0.026499435305595398}],"question":" Can shell built-ins be redirected? For example, is \"h &gt; history.txt\" a valid command? This would imply that shell built-ins would need to be handled after redirection was applied. ","answers":[" No. They can't be redirected. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"command history file","salience":0.6399405002593994},{"name":"everything","salience":0.24625171720981598},{"name":"entries","salience":0.1138077899813652}],"question":" Does the command history file only contain the most recent 20 entries, or everything? ","answers":[" Only the most recent 20 entries. Since you can't see more than that, there's not much point storing them. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"sample program","salience":0.5998796820640564},{"name":"sequence numbers","salience":0.2065391093492508},{"name":"command history","salience":0.193581223487854}],"question":" The sample program seems to start sequence numbers in the command history at 2, is this correct? ","answers":[" No ... it's not correct ... and it's now fixed. It's not going to fix any old .mymysh_history files that start counting at 2, but if you remove the file and restart mymysh , it should start counting from 1. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"command lines","salience":0.46204379200935364},{"name":"characters","salience":0.4104117751121521},{"name":"history","salience":0.0742645263671875},{"name":"char lines","salience":0.05327989161014557}],"question":" Are all command lines MAX 200 characters? Or do we have to dynamically allocate char lines to store into history? ","answers":[" If the spec doesn't say that you have to dynamically allocate command line strings for the history, then you don't. I think the data structures I gave you assumed that you would dynamically allocate command lines for the history, but you can change those data structures if you want. "]},{"tags":[{"name":"forums"},{"name":"assignments"},{"name":"assignment 2"},{"name":"assignment 2 specification "},{"name":"command","salience":0.30730172991752625},{"name":"file","salience":0.2161491960287094},{"name":"directory","salience":0.2161491960287094},{"name":"cs1521/bin/mymysh","salience":0.1428886353969574},{"name":"error","salience":0.11751125007867813}],"question":" I am not sure if I am using the right command, but running ~cs1521/bin/mymysh gives me a \"No such file or directory\" error. ","answers":[" Ooops ... forgot to put the executable there ... it's there now "]}]}